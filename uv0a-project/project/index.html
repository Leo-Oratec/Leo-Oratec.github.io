<!DOCTYPE html>
<!-- Created with https://packager.turbowarp.org/ -->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- We only include this to explicitly loosen the CSP of various packager environments. It does not provide any security. -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: blob:">
  <title>project</title>
  <style>
    body {
      color: #ffffff;
      font-family: sans-serif;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    :root, body.is-fullscreen {
      background-color: #000000;
    }
    [hidden] {
      display: none !important;
    }
    h1 {
      font-weight: normal;
    }
    a {
      color: inherit;
      text-decoration: underline;
      cursor: pointer;
    }

    #app, #loading, #error, #launch {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: default;
      user-select: none;
      -webkit-user-select: none;
      background-color: #000000;
    }
    #launch {
      background-color: rgba(0, 0, 0, 0.7);
      cursor: pointer;
    }
    .green-flag {
      width: 80px;
      height: 80px;
      padding: 16px;
      border-radius: 100%;
      background: rgba(255, 255, 255, 0.75);
      border: 3px solid hsla(0, 100%, 100%, 1);
      display: flex;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
    }
    #loading {
      
    }
    .progress-bar-outer {
      border: 1px solid currentColor;
      height: 10px;
      width: 200px;
      max-width: 200px;
    }
    .progress-bar-inner {
      height: 100%;
      width: 0;
      background-color: currentColor;
    }
    .loading-text, noscript {
      font-weight: normal;
      font-size: 36px;
      margin: 0 0 16px;
    }
    .loading-image {
      margin: 0 0 16px;
    }
    #error-message, #error-stack {
      font-family: monospace;
      max-width: 600px;
      white-space: pre-wrap;
      user-select: text;
      -webkit-user-select: text;
    }
    #error-stack {
      text-align: left;
      max-height: 200px;
      overflow: auto;
    }
    .control-button {
      width: 2rem;
      height: 2rem;
      padding: 0.375rem;
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      user-select: none;
      -webkit-user-select: none;
      cursor: pointer;
      border: 0;
      border-radius: 4px;
    }
    .control-button:hover {
      background: #ff4c4c26;
    }
    .control-button.active {
      background: #ff4c4c59;
    }
    .fullscreen-button {
      background: white !important;
    }
    .standalone-fullscreen-button {
      position: absolute;
      top: 0;
      right: 0;
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 0 0 0 4px;
      padding: 4px;
      cursor: pointer;
    }
    .sc-canvas {
      cursor: auto;
    }
    .sc-monitor-root[data-opcode^="data_"] .sc-monitor-value-color {
      background-color: #ff8c1a;
    }
    .sc-monitor-row-value-outer {
      background-color: #fc662c;
    }
    .sc-monitor-row-value-editing .sc-monitor-row-value-outer {
      background-color: #e25b27;
    }
    
  </style>
  <meta name="theme-color" content="#000000">
  
</head>
<body>
  <div id="app"></div>

  <div id="launch" class="screen" hidden title="Click to start">
    <div class="green-flag">
      <svg viewBox="0 0 16.63 17.5" width="42" height="44">
        <defs><style>.cls-1,.cls-2{fill:#4cbf56;stroke:#45993d;stroke-linecap:round;stroke-linejoin:round;}.cls-2{stroke-width:1.5px;}</style></defs>
        <path class="cls-1" d="M.75,2A6.44,6.44,0,0,1,8.44,2h0a6.44,6.44,0,0,0,7.69,0V12.4a6.44,6.44,0,0,1-7.69,0h0a6.44,6.44,0,0,0-7.69,0"/>
        <line class="cls-2" x1="0.75" y1="16.75" x2="0.75" y2="0.75"/>
      </svg>
    </div>
  </div>

  <div id="loading" class="screen">
    <noscript>Enable JavaScript</noscript>
    
    
    <div class="progress-bar-outer"><div class="progress-bar-inner" id="loading-inner"></div></div>
  </div>

  <div id="error" class="screen" hidden>
    <h1>Error</h1>
    <details>
      <summary id="error-message"></summary>
      <p id="error-stack"></p>
    </details>
  </div>

  <script src="script.js"></script>
  <script>
    const appElement = document.getElementById('app');
    const launchScreen = document.getElementById('launch');
    const loadingScreen = document.getElementById('loading');
    const loadingInner = document.getElementById('loading-inner');
    const errorScreen = document.getElementById('error');
    const errorScreenMessage = document.getElementById('error-message');
    const errorScreenStack = document.getElementById('error-stack');

    const handleError = (error) => {
      console.error(error);
      if (!errorScreen.hidden) return;
      errorScreen.hidden = false;
      errorScreenMessage.textContent = '' + error;
      let debug = error && error.stack || 'no stack';
      debug += '\nUser agent: ' + navigator.userAgent;
      errorScreenStack.textContent = debug;
    };
    const setProgress = (progress) => {
      if (loadingInner) loadingInner.style.width = progress * 100 + '%';
    };
    const interpolate = (a, b, t) => a + t * (b - a);

    try {
      setProgress(0.1);

      const scaffolding = new Scaffolding.Scaffolding();
      scaffolding.width = 480;
      scaffolding.height = 360;
      scaffolding.resizeMode = "preserve-ratio";
      scaffolding.editableLists = false;
      scaffolding.usePackagedRuntime = true;
      scaffolding.setup();
      scaffolding.appendTo(appElement);

      const vm = scaffolding.vm;
      window.scaffolding = scaffolding;
      window.vm = scaffolding.vm;
      window.Scratch = {
        vm,
        renderer: vm.renderer,
        audioEngine: vm.runtime.audioEngine,
        bitmapAdapter: vm.runtime.v2BitmapAdapter,
        videoProvider: vm.runtime.ioDevices.video.provider
      };

      scaffolding.setUsername("player####".replace(/#/g, () => Math.floor(Math.random() * 10)));
      scaffolding.setAccentColor("#ff4c4c");

      scaffolding.addCloudProvider(new Scaffolding.Cloud.WebSocketProvider(["wss://clouddata.turbowarp.org","wss://clouddata.turbowarp.xyz"], "p4-@project.sb3"));

      vm.setTurboMode(false);
      if (vm.setInterpolation) vm.setInterpolation(false);
      if (vm.setFramerate) vm.setFramerate(30);
      if (vm.renderer.setUseHighQualityRender) vm.renderer.setUseHighQualityRender(false);
      if (vm.setRuntimeOptions) vm.setRuntimeOptions({
        fencing: true,
        miscLimits: true,
        maxClones: 300,
      });
      if (vm.setCompilerOptions) vm.setCompilerOptions({
        enabled: true,
        warpTimer: false
      });

      if (typeof ScaffoldingAddons !== 'undefined') {
        ScaffoldingAddons.run(scaffolding, {"gamepad":false,"pointerlock":false,"specialCloudBehaviors":false,"unsafeCloudBehaviors":false,"pause":false});
      }

      scaffolding.setExtensionSecurityManager({
        getSandboxMode: 'unsandboxed',
        canLoadExtensionFromProject: (url) => {
          handleError(new Error('Missing custom extension: ' + url));
          return Promise.resolve(false);
        }
      });
      for (const extension of ["data:text/javascript;,(function(Scratch)%20%7B%20(function(Scratch)%20%7B%0A%20%20'use%20strict'%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error('files%20extension%20must%20be%20run%20unsandboxed')%3B%0A%20%20%7D%0A%0A%20%20const%20MODE_MODAL%20%3D%20'modal'%3B%0A%20%20const%20MODE_IMMEDIATELY_SHOW_SELECTOR%20%3D%20'selector'%3B%0A%20%20const%20MODE_ONLY_SELECTOR%20%3D%20'only-selector'%3B%0A%20%20const%20ALL_MODES%20%3D%20%5BMODE_MODAL%2C%20MODE_IMMEDIATELY_SHOW_SELECTOR%2C%20MODE_ONLY_SELECTOR%5D%3B%0A%20%20let%20openFileSelectorMode%20%3D%20MODE_MODAL%3B%0A%0A%20%20const%20AS_TEXT%20%3D%20'text'%3B%0A%20%20const%20AS_DATA_URL%20%3D%20'url'%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bstring%7D%20accept%20See%20MODE_%20constants%20above%0A%20%20%20*%20%40param%20%7Bstring%7D%20as%20See%20AS_%20constants%20above%0A%20%20%20*%20%40returns%20%7BPromise%3Cstring%3E%7D%20format%20given%20by%20as%20parameter%0A%20%20%20*%2F%0A%20%20const%20showFilePrompt%20%3D%20(accept%2C%20as)%20%3D%3E%20new%20Promise((_resolve)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20We%20can't%20reliably%20show%20an%20%3Cinput%3E%20picker%20without%20%22user%20interaction%22%20in%20all%20environments%2C%0A%20%20%20%20%2F%2F%20so%20we%20have%20to%20show%20our%20own%20UI%20anyways.%20We%20may%20as%20well%20use%20this%20to%20implement%20some%20nice%20features%0A%20%20%20%20%2F%2F%20that%20native%20file%20pickers%20don't%20have%3A%0A%20%20%20%20%2F%2F%20%20-%20Easy%20drag%2Bdrop%0A%20%20%20%20%2F%2F%20%20-%20Reliable%20cancel%20button%20(input%20cancel%20event%20is%20still%20basically%20nonexistent)%0A%20%20%20%20%2F%2F%20%20%20%20This%20is%20important%20so%20we%20can%20make%20this%20just%20a%20reporter%20instead%20of%20a%20command%2Bhat%20block.%0A%20%20%20%20%2F%2F%20%20%20%20Without%20an%20interface%2C%20the%20script%20would%20be%20stalled%20if%20the%20prompt%20was%20just%20cancelled.%0A%0A%20%20%20%20%2F**%20%40param%20%7Bstring%7D%20text%20*%2F%0A%20%20%20%20const%20callback%20%3D%20(text)%20%3D%3E%20%7B%0A%20%20%20%20%20%20_resolve(text)%3B%0A%20%20%20%20%20%20outer.remove()%3B%0A%20%20%20%20%20%20document.body.removeEventListener('keydown'%2C%20handleKeyDown)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20let%20isReadingFile%20%3D%20false%3B%0A%0A%20%20%20%20%2F**%20%40param%20%7BFile%7D%20file%20*%2F%0A%20%20%20%20const%20readFile%20%3D%20(file)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(isReadingFile)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20isReadingFile%20%3D%20true%3B%0A%0A%20%20%20%20%20%20const%20reader%20%3D%20new%20FileReader()%3B%0A%20%20%20%20%20%20reader.onload%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20callback(%2F**%20%40type%20%7Bstring%7D%20*%2F%20(reader.result))%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20reader.onerror%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20console.error('Failed%20to%20read%20file%20as%20text'%2C%20reader.error)%3B%0A%20%20%20%20%20%20%20%20callback('')%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20if%20(as%20%3D%3D%3D%20AS_TEXT)%20%7B%0A%20%20%20%20%20%20%20%20reader.readAsText(file)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20reader.readAsDataURL(file)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F**%20%40param%20%7BKeyboardEvent%7D%20e%20*%2F%0A%20%20%20%20const%20handleKeyDown%20%3D%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(e.key%20%3D%3D%3D%20'Escape')%20%7B%0A%20%20%20%20%20%20%20%20e.stopPropagation()%3B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20callback('')%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20document.body.addEventListener('keydown'%2C%20handleKeyDown%2C%20%7B%0A%20%20%20%20%20%20capture%3A%20true%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20const%20INITIAL_BORDER_COLOR%20%3D%20'%23888'%3B%0A%20%20%20%20const%20DROPPING_BORDER_COLOR%20%3D%20'%2303a9fc'%3B%0A%0A%20%20%20%20const%20outer%20%3D%20document.createElement('div')%3B%0A%20%20%20%20outer.className%20%3D%20'extension-content'%3B%0A%20%20%20%20outer.style.position%20%3D%20'fixed'%3B%0A%20%20%20%20outer.style.top%20%3D%20'0'%3B%0A%20%20%20%20outer.style.left%20%3D%20'0'%3B%0A%20%20%20%20outer.style.width%20%3D%20'100%25'%3B%0A%20%20%20%20outer.style.height%20%3D%20'100%25'%3B%0A%20%20%20%20outer.style.display%20%3D%20'flex'%3B%0A%20%20%20%20outer.style.alignItems%20%3D%20'center'%3B%0A%20%20%20%20outer.style.justifyContent%20%3D%20'center'%3B%0A%20%20%20%20outer.style.background%20%3D%20'rgba(0%2C%200%2C%200%2C%200.5)'%3B%0A%20%20%20%20outer.style.zIndex%20%3D%20'20000'%3B%0A%20%20%20%20outer.style.color%20%3D%20'black'%3B%0A%20%20%20%20outer.style.colorScheme%20%3D%20'light'%3B%0A%20%20%20%20outer.addEventListener('dragover'%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(e.dataTransfer.types.includes('Files'))%20%7B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20e.dataTransfer.dropEffect%20%3D%20'copy'%3B%0A%20%20%20%20%20%20%20%20modal.style.borderColor%20%3D%20DROPPING_BORDER_COLOR%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20outer.addEventListener('dragleave'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20modal.style.borderColor%20%3D%20INITIAL_BORDER_COLOR%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20outer.addEventListener('drop'%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20file%20%3D%20e.dataTransfer.files%5B0%5D%3B%0A%20%20%20%20%20%20if%20(file)%20%7B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20readFile(file)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20outer.addEventListener('click'%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(e.target%20%3D%3D%3D%20outer)%20%7B%0A%20%20%20%20%20%20%20%20callback('')%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20const%20modal%20%3D%20document.createElement('button')%3B%0A%20%20%20%20modal.style.boxShadow%20%3D%20'0%200%2010px%20-5px%20currentColor'%3B%0A%20%20%20%20modal.style.cursor%20%3D%20'pointer'%3B%0A%20%20%20%20modal.style.font%20%3D%20'inherit'%3B%0A%20%20%20%20modal.style.background%20%3D%20'white'%3B%0A%20%20%20%20modal.style.padding%20%3D%20'16px'%3B%0A%20%20%20%20modal.style.borderRadius%20%3D%20'16px'%3B%0A%20%20%20%20modal.style.border%20%3D%20%608px%20dashed%20%24%7BINITIAL_BORDER_COLOR%7D%60%3B%0A%20%20%20%20modal.style.position%20%3D%20'relative'%3B%0A%20%20%20%20modal.style.textAlign%20%3D%20'center'%3B%0A%20%20%20%20modal.addEventListener('click'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20input.click()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20modal.focus()%3B%0A%20%20%20%20outer.appendChild(modal)%3B%0A%0A%20%20%20%20const%20input%20%3D%20document.createElement('input')%3B%0A%20%20%20%20input.type%20%3D%20'file'%3B%0A%20%20%20%20input.accept%20%3D%20accept%3B%0A%20%20%20%20input.addEventListener('change'%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20%20%20const%20file%20%3D%20e.target.files%5B0%5D%3B%0A%20%20%20%20%20%20if%20(file)%20%7B%0A%20%20%20%20%20%20%20%20readFile(file)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20const%20title%20%3D%20document.createElement('div')%3B%0A%20%20%20%20title.textContent%20%3D%20'Select%20or%20drop%20file'%3B%0A%20%20%20%20title.style.fontSize%20%3D%20'1.5em'%3B%0A%20%20%20%20title.style.marginBottom%20%3D%20'8px'%3B%0A%20%20%20%20modal.appendChild(title)%3B%0A%0A%20%20%20%20const%20subtitle%20%3D%20document.createElement('div')%3B%0A%20%20%20%20const%20formattedAccept%20%3D%20accept%20%7C%7C%20'any'%3B%0A%20%20%20%20subtitle.textContent%20%3D%20%60Accepted%20formats%3A%20%24%7BformattedAccept%7D%60%3B%0A%20%20%20%20modal.appendChild(subtitle)%3B%0A%0A%20%20%20%20document.body.appendChild(outer)%3B%0A%0A%20%20%20%20if%20(openFileSelectorMode%20%3D%3D%3D%20MODE_IMMEDIATELY_SHOW_SELECTOR%20%7C%7C%20openFileSelectorMode%20%3D%3D%3D%20MODE_ONLY_SELECTOR)%20%7B%0A%20%20%20%20%20%20input.click()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(openFileSelectorMode%20%3D%3D%3D%20MODE_ONLY_SELECTOR)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Note%20that%20browser%20support%20for%20cancel%20is%20currently%20quite%20bad%0A%20%20%20%20%20%20input.addEventListener('cancel'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20callback('')%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20outer.remove()%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bstring%7D%20text%20Text%20to%20download%0A%20%20%20*%20%40param%20%7Bstring%7D%20file%20Name%20of%20the%20file%0A%20%20%20*%2F%0A%20%20const%20download%20%3D%20(text%2C%20file)%20%3D%3E%20%7B%0A%20%20%20%20const%20blob%20%3D%20new%20Blob(%5Btext%5D)%3B%0A%20%20%20%20const%20url%20%3D%20URL.createObjectURL(blob)%3B%0A%20%20%20%20const%20link%20%3D%20document.createElement('a')%3B%0A%20%20%20%20link.href%20%3D%20url%3B%0A%20%20%20%20link.download%20%3D%20file%3B%0A%20%20%20%20document.body.appendChild(link)%3B%0A%20%20%20%20link.click()%3B%0A%20%20%20%20link.remove()%3B%0A%20%20%20%20URL.revokeObjectURL(url)%3B%0A%20%20%7D%3B%0A%0A%20%20class%20Files%20%7B%0A%20%20%20%20getInfo%20()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20'files'%2C%0A%20%20%20%20%20%20%20%20name%3A%20'Files'%2C%0A%20%20%20%20%20%20%20%20color1%3A%20'%23fcb103'%2C%0A%20%20%20%20%20%20%20%20color2%3A%20'%23db9a37'%2C%0A%20%20%20%20%20%20%20%20color3%3A%20'%23db8937'%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'showPicker'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'open%20a%20file'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'showPickerExtensions'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'open%20a%20%5Bextension%5D%20file'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20extension%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'.txt'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'showPickerAs'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'open%20a%20file%20as%20%5Bas%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20as%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'encoding'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'showPickerExtensionsAs'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'open%20a%20%5Bextension%5D%20file%20as%20%5Bas%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20extension%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'.txt'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20as%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'encoding'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'download'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'download%20%5Btext%5D%20as%20%5Bfile%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Hello%2C%20world!'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20file%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'save.txt'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setOpenMode'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20open%20file%20selector%20mode%20to%20%5Bmode%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mode%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20MODE_MODAL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'automaticallyOpen'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20encoding%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'text'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20AS_TEXT%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'data%3A%20URL'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20AS_DATA_URL%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20automaticallyOpen%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'show%20modal'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20MODE_MODAL%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'open%20selector%20immediately'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20MODE_IMMEDIATELY_SHOW_SELECTOR%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20showPicker%20()%20%7B%0A%20%20%20%20%20%20return%20showFilePrompt(''%2C%20AS_TEXT)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20showPickerExtensions%20(args)%20%7B%0A%20%20%20%20%20%20return%20showFilePrompt(args.extension%2C%20AS_TEXT)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20showPickerAs%20(args)%20%7B%0A%20%20%20%20%20%20return%20showFilePrompt(''%2C%20args.as)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20showPickerExtensionsAs%20(args)%20%7B%0A%20%20%20%20%20%20return%20showFilePrompt(args.extension%2C%20args.as)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20download%20(args)%20%7B%0A%20%20%20%20%20%20download(args.text%2C%20args.file)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setOpenMode%20(args)%20%7B%0A%20%20%20%20%20%20if%20(ALL_MODES.includes(args.mode))%20%7B%0A%20%20%20%20%20%20%20%20openFileSelectorMode%20%3D%20args.mode%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20console.warn(%60unknown%20mode%60%2C%20args.mode)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Files())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20(function%20(Scratch)%20%7B%0A%20%20'use%20strict'%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error('Runtime%20Options%20extension%20needs%20to%20be%20run%20unsandboxed')%3B%0A%20%20%7D%0A%0A%20%20const%20greenFlagURI%20%3D%20'data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAABFFBMVEUAAACAgABVqlVJkklAn0BNmTNLljxGlzpDmzdFmjpGmzxHmz9Fmj1FmT5Emj1GmT1GmD1EmDxGmTxEmT1GmjxGmT1FmDxEmT5EmTxGmT5FmD1GmT5FmT1Gmj1EmT5FmT1FmT1FmDxGmT1FmjxLs09LtE9Jr0xJsk1Js05JtVBKtU5KtVBKtlBJrkpJsE1KtlFIrEpIsExLt1FLuFJKuVNIqkhLulNIp0VJqkhKtlJLvVRMvFNFmT5GpUVFmT1HpEVHokNMvlVFmT1Ho0NFmTxLvlVGoUFMvlVLvlVGn0BFmT1Nv1ZEmz5FmTxFmTxFmT1NvlZFmz9FmT5FnT9FnD5GnT9Mv1ZMv1ZMv1ZFmT1Mv1b%2F%2F%2F%2F70P2GAAAAWXRSTlMAAgMHCAoRFhcwMz0%2FRkdQVGFmaWpxcnh7gIGEhZKZo6eprLq%2Fv8DAwMDAwMDBwcHCwsPDxcbIysrLzM3Pz9DQ1NTV1dfZ29vg4uXm5%2Bjp6ens7fDx9Pv8%2FnPb5aAAAAABYktHRFt0vJU0AAAAsUlEQVQoz2NgwA3YhNiwS4hHykoou9goCrKiSUhGhqhZe7gbm3rxQwQ4BJihEupRYODooMDFyMAu6uMsgyoRFW5kHxjkqeuhL4cmAQM4JXRwSWjjktDEJaGFS0IVIeFtZuIaAZdQgUmY2%2FoqyTu5WcEkNGAS%2FkJMQJrbySAAJBxmGSoIlYAoYGCR8rPVM7QItuNlQJVgYGDlE5MU5kSErhz2%2BKCihEikNHYJJh5mBhIAADBcR%2Fr5OJzCAAAAAElFTkSuQmCC'%3B%0A%20%20const%20TURBO_MODE%20%3D%20'turbo%20mode'%3B%0A%20%20const%20INTERPOLATION%20%3D%20'interpolation'%3B%0A%20%20const%20REMOVE_FENCING%20%3D%20'remove%20fencing'%3B%0A%20%20const%20REMOVE_MISC_LIMITS%20%3D%20'remove%20misc%20limits'%3B%0A%20%20const%20HIGH_QUALITY_PEN%20%3D%20'high%20quality%20pen'%3B%0A%0A%20%20class%20RuntimeOptions%20%7B%0A%20%20%20%20getInfo%20()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20'runtimeoptions'%2C%0A%20%20%20%20%20%20%20%20name%3A%20'Runtime%20Options'%2C%0A%20%20%20%20%20%20%20%20color1%3A%20'%238c9abf'%2C%0A%20%20%20%20%20%20%20%20color2%3A%20'%237d8aab'%2C%0A%20%20%20%20%20%20%20%20color3%3A%20'%236f7b99'%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getEnabled'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'is%20%5Bthing%5D%20enabled%3F'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20thing%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20TURBO_MODE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'thing'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setEnabled'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20%5Bthing%5D%20to%20%5Benabled%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20thing%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20TURBO_MODE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'thing'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20enabled%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'true'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'enabled'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getFramerate'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'get%20framerate%20limit'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setFramerate'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20framerate%20limit%20to%20%5Bfps%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fps%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'30'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getCloneLimit'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'get%20clone%20limit'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setCloneLimit'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20clone%20limit%20%5Blimit%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20limit%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'300'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'clones'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getDimension'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'get%20stage%20%5Bdimension%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dimension%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'width'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'dimension'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setDimensions'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20stage%20size%20width%3A%20%5Bwidth%5D%20height%3A%20%5Bheight%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'480'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20height%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'360'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setUsername'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20username%20to%20%5Busername%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20username%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'greenFlag'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'run%20green%20flag%20%5Bflag%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20flag%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.IMAGE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataURI%3A%20greenFlagURI%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20thing%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'turbo%20mode'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20TURBO_MODE%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'interpolation'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20INTERPOLATION%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'remove%20fencing'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20REMOVE_FENCING%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'remove%20misc%20limits'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20REMOVE_MISC_LIMITS%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'high%20quality%20pen'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20HIGH_QUALITY_PEN%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enabled%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'enabled'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'true'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'disabled'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'false'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20clones%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'default%20(300)'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'300'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Infinity'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'Infinity'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20dimension%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'width'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'width'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'height'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'height'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getEnabled%20(%7B%20thing%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(thing%20%3D%3D%3D%20TURBO_MODE)%20%7B%0A%20%20%20%20%20%20%20%20return%20Scratch.vm.runtime.turboMode%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(thing%20%3D%3D%3D%20INTERPOLATION)%20%7B%0A%20%20%20%20%20%20%20%20return%20Scratch.vm.runtime.interpolationEnabled%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(thing%20%3D%3D%3D%20REMOVE_FENCING)%20%7B%0A%20%20%20%20%20%20%20%20return%20!Scratch.vm.runtime.runtimeOptions.fencing%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(thing%20%3D%3D%3D%20REMOVE_MISC_LIMITS)%20%7B%0A%20%20%20%20%20%20%20%20return%20!Scratch.vm.runtime.runtimeOptions.miscLimits%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(thing%20%3D%3D%3D%20HIGH_QUALITY_PEN)%20%7B%0A%20%20%20%20%20%20%20%20return%20Scratch.renderer.useHighQualityRender%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setEnabled%20(%7B%20thing%2C%20enabled%20%7D)%20%7B%0A%20%20%20%20%20%20enabled%20%3D%20Scratch.Cast.toBoolean(enabled)%3B%0A%0A%20%20%20%20%20%20if%20(thing%20%3D%3D%3D%20TURBO_MODE)%20%7B%0A%20%20%20%20%20%20%20%20Scratch.vm.setTurboMode(enabled)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(thing%20%3D%3D%3D%20INTERPOLATION)%20%7B%0A%20%20%20%20%20%20%20%20Scratch.vm.setInterpolation(enabled)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(thing%20%3D%3D%3D%20REMOVE_FENCING)%20%7B%0A%20%20%20%20%20%20%20%20Scratch.vm.setRuntimeOptions(%7B%0A%20%20%20%20%20%20%20%20%20%20fencing%3A%20!enabled%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(thing%20%3D%3D%3D%20REMOVE_MISC_LIMITS)%20%7B%0A%20%20%20%20%20%20%20%20Scratch.vm.setRuntimeOptions(%7B%0A%20%20%20%20%20%20%20%20%20%20miscLimits%3A%20!enabled%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(thing%20%3D%3D%3D%20HIGH_QUALITY_PEN)%20%7B%0A%20%20%20%20%20%20%20%20Scratch.renderer.setUseHighQualityRender(enabled)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getFramerate%20()%20%7B%0A%20%20%20%20%20%20return%20Scratch.vm.runtime.frameLoop.framerate%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFramerate%20(%7B%20fps%20%7D)%20%7B%0A%20%20%20%20%20%20fps%20%3D%20Scratch.Cast.toNumber(fps)%3B%0A%20%20%20%20%20%20Scratch.vm.setFramerate(fps)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getCloneLimit%20()%20%7B%0A%20%20%20%20%20%20return%20Scratch.vm.runtime.runtimeOptions.maxClones%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setCloneLimit%20(%7B%20limit%20%7D)%20%7B%0A%20%20%20%20%20%20limit%20%3D%20Scratch.Cast.toNumber(limit)%3B%0A%20%20%20%20%20%20Scratch.vm.setRuntimeOptions(%7B%0A%20%20%20%20%20%20%20%20maxClones%3A%20limit%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getDimension%20(%7B%20dimension%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(dimension%20%3D%3D%3D%20'width')%20%7B%0A%20%20%20%20%20%20%20%20return%20Scratch.vm.runtime.stageWidth%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(dimension%20%3D%3D%3D%20'height')%20%7B%0A%20%20%20%20%20%20%20%20return%20Scratch.vm.runtime.stageHeight%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setDimensions%20(%7B%20width%2C%20height%20%7D)%20%7B%0A%20%20%20%20%20%20width%20%3D%20Scratch.Cast.toNumber(width)%3B%0A%20%20%20%20%20%20height%20%3D%20Scratch.Cast.toNumber(height)%3B%0A%20%20%20%20%20%20Scratch.vm.setStageSize(width%2C%20height)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setUsername%20(%7B%20username%20%7D)%20%7B%0A%20%20%20%20%20%20Scratch.vm.runtime.ioDevices.userData._username%20%3D%20Scratch.Cast.toString(username)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20greenFlag%20()%20%7B%0A%20%20%20%20%20%20Scratch.vm.runtime.greenFlag()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20RuntimeOptions())%3B%0A%7D)(window.Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%0A%2F%2F%20Made%20by%20CST1229%0A%2F%2F%20Modified%20port%20of%20an%20extension%20from%20a%20mod%20I%20worked%20on.%0A%0A(function(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20const%20CaseParam%20%3D%20%7B%0A%20%20%20%20LOWERCASE%3A%20%22lowercase%22%2C%0A%20%20%20%20UPPERCASE%3A%20%22uppercase%22%2C%0A%20%20%20%20MIXEDCASE%3A%20%22mixedcase%22%2C%0A%20%20%20%20TITLECASE%3A%20%22titlecase%22%2C%0A%20%20%20%20EXACTTITLECASE%3A%20%22exacttitlecase%22%0A%20%20%7D%3B%0A%0A%20%20let%20splitCache%3B%0A%20%20let%20matchCache%3B%0A%0A%20%20class%20StringsExt%20%7B%0A%20%20%20%20constructor%20()%20%7B%7D%0A%0A%20%20%20%20_initCaseMenu%20()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20%22lowercase%22%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.LOWERCASE%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20%22UPPERCASE%22%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.UPPERCASE%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20%22Title%20Case%22%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.TITLECASE%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20%22Exactly%20Title%20Case%22%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.EXACTTITLECASE%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20%22MiXeD%20CaSe%22%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.MIXEDCASE%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getInfo%20()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20id%20%22text%22%20could%20conflict%20with%20Scratch%20Lab's%20Animated%20Text%0A%20%20%20%20%20%20%20%20%2F%2F%20for%20mods%20which%20implement%20it%20or%20if%20it%20ever%20comes%20out%0A%20%20%20%20%20%20%20%20id%3A%20%22strings%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Text%22%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22letters_of%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22letters%20%5BLETTER1%5D%20to%20%5BLETTER2%5D%20of%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LETTER1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%202%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LETTER2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%204%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22split%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22item%20%5BITEM%5D%20of%20%5BSTRING%5D%20split%20by%20%5BSPLIT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ITEM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%203%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPLIT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22p%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22count%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22count%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SUBSTRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22p%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22indexof%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22index%20of%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SUBSTRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22p%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replace%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22replace%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SUBSTRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22world%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Hello%20world!%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPLACE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22fellow%20Scratchers%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22repeat%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22repeat%20%5BSTRING%5D%20%5BREPEAT%5D%20times%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%20%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPEAT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%203%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22unicodeof%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Unicode%20of%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22A%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22unicodefrom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Unicode%20%5BNUM%5D%20as%20letter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2065%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replaceRegex%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22replace%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REGEX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22.%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FLAGS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22g%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Hello%20world!%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPLACE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%24%26%24%26%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22matchRegex%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22item%20%5BITEM%5D%20of%20%5BSTRING%5D%20matched%20by%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ITEM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Hello%20world!%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REGEX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22(.)%20(.%7B2%7D)%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FLAGS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22g%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22countRegex%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22count%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Hello%20world!%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REGEX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%5BAEIOU%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FLAGS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22i%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22testRegex%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BSTRING%5D%20matches%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Hello%20world!%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REGEX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22hello%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FLAGS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22i%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22identical%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20%5BOPERAND1%5D%20identical%20to%20%5BOPERAND2%5D%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OPERAND1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22A%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OPERAND2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22a%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isCase%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20%5BSTRING%5D%20%5BTEXTCASE%5D%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXTCASE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22textCase%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20CaseParam.LOWERCASE%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22toCase%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22convert%20%5BSTRING%5D%20to%20%5BTEXTCASE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXTCASE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22textCase%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20CaseParam.UPPERCASE%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20textCase%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20this._initCaseMenu()%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20identical(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Purposefully%20no%20casting%2C%20because%0A%20%20%20%20%20%20%2F%2F%20types%20ARE%20differentiated%20in%20this%20block%0A%20%20%20%20%20%20return%20args.OPERAND1%20%3D%3D%3D%20args.OPERAND2%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20unicodeof(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20chars%20%3D%20Array.from(args.STRING.toString())%3B%0A%20%20%20%20%20%20return%20chars.map((char)%20%3D%3E%20char.charCodeAt(0)).join(%22%20%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20unicodefrom(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20String.fromCharCode(Number(args.NUM)%20%7C%7C%200)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20letters_of(args%2C%20util)%20%7B%0A%20%20%20%20%20%20args.STRING%20%3D%20args.STRING.toString()%3B%0A%20%20%20%20%20%20args.LETTER1%20%3D%20Number(args.LETTER1)%20%7C%7C%200%3B%0A%20%20%20%20%20%20args.LETTER2%20%3D%20Number(args.LETTER2)%20%7C%7C%200%3B%0A%20%20%20%20%20%20return%20args.STRING.substring(args.LETTER1%20-%201%2C%20args.LETTER2)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_caseInsensitiveRegex(str)%20%7B%0A%20%20%20%20%20%20return%20new%20RegExp(%0A%20%20%20%20%20%20%20%20str.replaceAll(%2F%5B%5Ea-zA-Z0-9%5D%2Fg%2C%20%22%5C%5C%24%26%22)%2C%0A%20%20%20%20%20%20%20%20%22gi%22%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20split(args%2C%20util)%20%7B%0A%20%20%20%20%20%20args.STRING%20%3D%20(args.STRING%20%3F%3F%20%22%22).toString()%3B%0A%20%20%20%20%20%20args.SPLIT%20%3D%20(args.SPLIT%20%3F%3F%20%22%22).toString()%3B%0A%20%20%20%20%20%20args.ITEM%20%3D%20Number(args.ITEM)%20%7C%7C%200%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Cache%20the%20last%20split%0A%20%20%20%20%20%20if%20(!(%0A%20%20%20%20%20%20%20%20splitCache%20%26%26%0A%20%20%20%20%20%20%20%20splitCache.string%20%3D%3D%3D%20args.STRING%20%26%26%0A%20%20%20%20%20%20%20%20splitCache.split%20%3D%3D%3D%20args.SPLIT%0A%20%20%20%20%20%20))%20%7B%0A%20%20%20%20%20%20%20%20const%20regex%20%3D%20this._caseInsensitiveRegex(args.SPLIT)%3B%0A%0A%20%20%20%20%20%20%20%20splitCache%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20string%3A%20args.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20split%3A%20args.SPLIT%2C%0A%20%20%20%20%20%20%20%20%20%20arr%3A%20args.STRING.split(regex)%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20splitCache.arr%5Bargs.ITEM%20-%201%5D%20%7C%7C%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20count(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Fill%20cache%0A%20%20%20%20%20%20this.split(%7B%0A%20%20%20%20%20%20%20%20SPLIT%3A%20args.SUBSTRING%2C%0A%20%20%20%20%20%20%20%20STRING%3A%20args.STRING%2C%0A%20%20%20%20%20%20%20%20ITEM%3A%200%0A%20%20%20%20%20%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20return%20(splitCache.arr.length%20-%201)%20%7C%7C%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20replace(args%2C%20util)%20%7B%0A%20%20%20%20%20%20args.STRING%20%3D%20args.STRING.toString()%3B%0A%20%20%20%20%20%20args.SUBSTRING%20%3D%20args.SUBSTRING.toString()%3B%0A%0A%20%20%20%20%20%20args.REPLACE%20%3D%20args.REPLACE.toString()%3B%0A%0A%20%20%20%20%20%20const%20regex%20%3D%20this._caseInsensitiveRegex(args.SUBSTRING)%3B%0A%0A%20%20%20%20%20%20return%20args.STRING.replace(regex%2C%20args.REPLACE)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20indexof(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20.toLowerCase()%20for%20case%20insensitivity%0A%20%20%20%20%20%20args.STRING%20%3D%20(args.STRING%20%3F%3F%20%22%22).toString().toLowerCase()%3B%0A%20%20%20%20%20%20args.SUBSTRING%20%3D%20(args.SUBSTRING%20%3F%3F%20%22%22).toString().toLowerCase()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Since%20both%20arguments%20are%20casted%20to%20strings%20beforehand%2C%0A%20%20%20%20%20%20%2F%2F%20we%20don't%20have%20to%20worry%20about%20type%20differences%0A%20%20%20%20%20%20%2F%2F%20like%20in%20the%20item%20number%20of%20in%20list%20block%0A%20%20%20%20%20%20const%20found%20%3D%20args.STRING.indexOf(args.SUBSTRING)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20indexOf%20returns%20-1%20when%20no%20matches%20are%20found%2C%20we%20can%20just%20%2B1%0A%20%20%20%20%20%20return%20found%20%2B%201%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20repeat(args%2C%20util)%20%7B%0A%20%20%20%20%20%20args.STRING%20%3D%20args.STRING.toString()%3B%0A%20%20%20%20%20%20args.REPEAT%20%3D%20Number(args.REPEAT)%20%7C%7C%200%3B%0A%20%20%20%20%20%20return%20args.STRING.repeat(args.REPEAT)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20replaceRegex(args%2C%20util)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20args.STRING%20%3D%20args.STRING.toString()%3B%0A%20%20%20%20%20%20%20%20args.REPLACE%20%3D%20args.REPLACE.toString()%3B%0A%20%20%20%20%20%20%20%20args.REGEX%20%3D%20args.REGEX.toString()%3B%0A%20%20%20%20%20%20%20%20args.FLAGS%20%3D%20args.FLAGS.toString()%3B%0A%0A%20%20%20%20%20%20%20%20return%20args.STRING.replace(%0A%20%20%20%20%20%20%20%20%20%20new%20RegExp(args.REGEX%2C%20args.FLAGS)%2C%0A%20%20%20%20%20%20%20%20%20%20args.REPLACE%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20console.error(e)%3B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20matchRegex(args%2C%20util)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20args.STRING%20%3D%20(args.STRING%20%3F%3F%20%22%22).toString()%3B%0A%20%20%20%20%20%20%20%20args.REGEX%20%3D%20(args.REGEX%20%3F%3F%20%22%22).toString()%3B%0A%20%20%20%20%20%20%20%20args.FLAGS%20%3D%20(args.FLAGS%20%3F%3F%20%22%22).toString()%3B%0A%20%20%20%20%20%20%20%20args.ITEM%20%3D%20Number(args.ITEM)%20%7C%7C%200%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Cache%20the%20last%20matched%20string%0A%20%20%20%20%20%20%20%20if%20(!(%0A%20%20%20%20%20%20%20%20%20%20matchCache%20%26%26%0A%20%20%20%20%20%20%20%20%20%20matchCache.string%20%3D%3D%3D%20args.STRING%20%26%26%0A%20%20%20%20%20%20%20%20%20%20matchCache.regex%20%3D%3D%3D%20args.REGEX%20%26%26%0A%20%20%20%20%20%20%20%20%20%20matchCache.flags%20%3D%3D%3D%20args.FLAGS%0A%20%20%20%20%20%20%20%20))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20newFlags%20%3D%20args.FLAGS.includes(%22g%22)%20%3F%20args.FLAGS%20%3A%20args.FLAGS%20%2B%20%22g%22%3B%0A%20%20%20%20%20%20%20%20%20%20const%20regex%20%3D%20new%20RegExp(args.REGEX%2C%20newFlags)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20matchCache%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20string%3A%20args.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20regex%3A%20args.REGEX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flags%3A%20args.FLAGS%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arr%3A%20args.STRING.match(regex)%20%7C%7C%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20matchCache.arr%5Bargs.ITEM%20-%201%5D%20%7C%7C%20%22%22%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20console.error(e)%3B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20countRegex(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Fill%20cache%0A%20%20%20%20%20%20%2F%2F%20(ITEM%20is%20casted%20into%200%2C%0A%20%20%20%20%20%20%2F%2F%20but%20we%20don't%20care%20about%20the%20return%20value)%0A%20%20%20%20%20%20this.matchRegex(args%2C%20util)%3B%0A%20%20%20%20%20%20return%20matchCache.arr.length%20%7C%7C%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20testRegex(args%2C%20util)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20args.STRING%20%3D%20args.STRING.toString()%3B%0A%20%20%20%20%20%20%20%20args.REGEX%20%3D%20args.REGEX.toString()%3B%0A%20%20%20%20%20%20%20%20args.FLAGS%20%3D%20args.FLAGS.toString()%3B%0A%0A%20%20%20%20%20%20%20%20return%20new%20RegExp(args.REGEX%2C%20args.FLAGS).test(args.STRING)%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20console.error(e)%3B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20isCase(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20string%20%3D%20args.STRING.toString()%3B%0A%20%20%20%20%20%20const%20textCase%20%3D%20args.TEXTCASE.toString()%3B%0A%20%20%20%20%20%20switch%20(textCase)%20%7B%0A%20%20%20%20%20%20%20%20case%20CaseParam.LOWERCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.toLowerCase()%20%3D%3D%3D%20string%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.UPPERCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.toUpperCase()%20%3D%3D%3D%20string%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.MIXEDCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20(!(%0A%20%20%20%20%20%20%20%20%20%20%20%20string.toUpperCase()%20%3D%3D%3D%20string%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20string.toLowerCase()%20%3D%3D%3D%20string%0A%20%20%20%20%20%20%20%20%20%20))%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.TITLECASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.split(%2F%5Cb%2Fg).every((word)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!word)%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20titleCased%20%3D%20word%5B0%5D.toUpperCase()%20%2B%20word.substring(1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20word%20%3D%3D%3D%20titleCased%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.EXACTTITLECASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.split(%2F%5Cb%2Fg).every((word)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!word)%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20titleCased%20%3D%20word%5B0%5D.toUpperCase()%20%2B%20word.substring(1).toLowerCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20word%20%3D%3D%3D%20titleCased%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20default%3A%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20toCase(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20string%20%3D%20args.STRING.toString()%3B%0A%20%20%20%20%20%20const%20textCase%20%3D%20args.TEXTCASE.toString()%3B%0A%20%20%20%20%20%20switch%20(textCase)%20%7B%0A%20%20%20%20%20%20%20%20case%20CaseParam.LOWERCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.toLowerCase()%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.UPPERCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.toUpperCase()%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.MIXEDCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20Array.from(string).map(%0A%20%20%20%20%20%20%20%20%20%20%20%20(char%2C%20index)%20%3D%3E%20index%20%25%202%20%3D%3D%3D%200%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20char.toUpperCase()%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20char.toLowerCase()%0A%20%20%20%20%20%20%20%20%20%20).join(%22%22)%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.TITLECASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.split(%2F%5Cb%2Fg).map((word)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!word)%20return%20''%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20word%5B0%5D.toUpperCase()%20%2B%20word.substring(1)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D).join(%22%22)%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.EXACTTITLECASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.split(%2F%5Cb%2Fg).map((word)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!word)%20return%20''%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20word%5B0%5D.toUpperCase()%20%2B%20word.substring(1).toLowerCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D).join(%22%22)%3B%0A%20%20%20%20%20%20%20%20default%3A%20return%20string%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20StringsExt())%3B%0A%7D)(Scratch)%3B%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20(function(Scratch)%20%7B%0A%20%20'use%20strict'%3B%0A%0A%20%20%2F%2F%20This%20extension%20was%20created%20by%20making%20projects%20with%20https%3A%2F%2Flab.scratch.mit.edu%2Ftext%2F%0A%20%20%2F%2F%20To%20determine%20block%20and%20argument%20IDs%2C%20we%20extracted%20project.json%20and%20examined%20the%20result.%0A%20%20%2F%2F%20To%20determine%20block%20behaviors%20we%20simply%20experiment%20with%20Scratch%20Labs%20and%20made%20sure%20our%0A%20%20%2F%2F%20blocks%20do%20the%20same%20things.%0A%20%20%2F%2F%20This%20extension's%20code%20is%20not%20based%20on%20the%20source%20code%20of%20Scratch%20Labs.%0A%0A%20%20%2F%2F%20by%20%40LilyMakesThings%0A%20%20const%20blockIconURI%20%3D%20'data%3Aimage%2Fsvg%2Bxml%3B%2C%253Csvg%2520xmlns%253D%2522http%253A%252F%252Fwww.w3.org%252F2000%252Fsvg%2522%2520width%253D%2522284.242%2522%2520height%253D%2522284.242%2522%253E%253Cg%2520fill-rule%253D%2522evenodd%2522%2520stroke-miterlimit%253D%252210%2522%2520data-paper-data%253D%2522%257B%2526quot%253BisPaintingLayer%2526quot%253B%253Atrue%257D%2522%2520style%253D%2522mix-blend-mode%253Anormal%2522%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.83%2520522.83%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.83%2520522.83%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ffa24d%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ff774d%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ff4c4c%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253C%252Fg%253E%253C%252Fsvg%253E'%3B%0A%0A%20%20const%20CUSTOM_STATE_KEY%20%3D%20Symbol()%3B%0A%0A%20%20const%20ALIGN_LEFT%20%3D%200%3B%0A%20%20const%20ALIGN_RIGHT%20%3D%201%3B%0A%20%20const%20ALIGN_CENTER%20%3D%202%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20renderer%20%3D%20vm.renderer%3B%0A%20%20const%20gl%20%3D%20renderer.gl%3B%0A%0A%20%20const%20NATIVE_FONTS%20%3D%20%5B%0A%20%20%20%20'Sans%20Serif'%2C%0A%20%20%20%20'Serif'%2C%0A%20%20%20%20'Handwriting'%2C%0A%20%20%20%20'Marker'%2C%0A%20%20%20%20'Curly'%2C%0A%20%20%20%20'Pixel'%2C%0A%20%20%5D%3B%0A%0A%20%20const%20DEFAULT_COLOR%20%3D%20'%23575e75'%3B%0A%20%20const%20DEFAULT_FONT%20%3D%20'Handwriting'%3B%0A%20%20const%20DEFAULT_WIDTH%20%3D%20vm.runtime.stageWidth%3B%0A%20%20const%20DEFAULT_ALIGN%20%3D%20ALIGN_CENTER%3B%0A%20%20const%20DEFAULT_FONT_SIZE%20%3D%2024%3B%0A%0A%20%20const%20TYPE_DELAY%20%3D%201000%20%2F%2015%3B%0A%0A%20%20const%20RAINBOW_TIME_PER%20%3D%201000%3B%0A%20%20const%20RAINBOW_DURATION%20%3D%202000%3B%0A%0A%20%20const%20ZOOM_DURATION%20%3D%20500%3B%0A%0A%20%20let%20globalFrameTime%20%3D%200%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40typedef%20TextState%0A%20%20%20*%20%40property%20%7BTextCostumeSkin%7D%20skin%0A%20%20%20*%2F%0A%0A%20%20%2F%2F%20temporary%0A%20%20if%20(!renderer.exports%20%7C%7C%20!renderer.exports.Skin%20%7C%7C%20!vm.exports)%20%7B%0A%20%20%20%20alert('VM%20is%20too%20old%20for%20animated%20text%20extension')%3B%0A%20%20%20%20throw%20new%20Error('VM%20is%20too%20old')%3B%0A%20%20%7D%0A%0A%20%20const%20Skin%20%3D%20renderer.exports.Skin%3B%0A%20%20const%20CanvasMeasurementProvider%20%3D%20renderer.exports.CanvasMeasurementProvider%3B%0A%20%20const%20twgl%20%3D%20renderer.exports.twgl%3B%0A%20%20const%20RenderedTarget%20%3D%20vm.exports.RenderedTarget%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bnumber%7D%20c%0A%20%20%20*%20%40returns%20%7Bstring%7D%0A%20%20%20*%2F%0A%20%20const%20formatComponent%20%3D%20(c)%20%3D%3E%20Math.round(c).toString(16).padStart(2%2C%20'0')%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7B%5Bnumber%2C%20number%2C%20number%5D%7D%20color%0A%20%20%20*%20%40returns%20%7Bstring%7D%0A%20%20%20*%2F%0A%20%20const%20formatColor%20%3D%20(color)%20%3D%3E%20%60%23%24%7BformatComponent(color%5B0%5D)%7D%24%7BformatComponent(color%5B1%5D)%7D%24%7BformatComponent(color%5B2%5D)%7D%60%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bnumber%7D%20h%20hue%20from%200-1%0A%20%20%20*%20%40param%20%7Bnumber%7D%20s%20saturation%20from%200-1%0A%20%20%20*%20%40param%20%7Bnumber%7D%20v%20value%20from%200-1%0A%20%20%20*%20%40returns%20%7B%5Bnumber%2C%20number%2C%20number%5D%7D%20RGB%20channels%20from%200-255%0A%20%20%20*%2F%0A%20%20const%20hsvToRGB%20%3D%20(h%2C%20s%2C%20v)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FHSL_and_HSV%0A%20%20%20%20var%20r%2C%20g%2C%20b%3B%0A%20%20%20%20var%20i%20%3D%20Math.floor(h%20*%206)%3B%0A%20%20%20%20var%20f%20%3D%20h%20*%206%20-%20i%3B%0A%20%20%20%20var%20p%20%3D%20v%20*%20(1%20-%20s)%3B%0A%20%20%20%20var%20q%20%3D%20v%20*%20(1%20-%20f%20*%20s)%3B%0A%20%20%20%20var%20t%20%3D%20v%20*%20(1%20-%20(1%20-%20f)%20*%20s)%3B%0A%20%20%20%20switch%20(i%20%25%206)%20%7B%0A%20%20%20%20%20%20case%200%3A%20r%20%3D%20v%2C%20g%20%3D%20t%2C%20b%20%3D%20p%3B%20break%3B%0A%20%20%20%20%20%20case%201%3A%20r%20%3D%20q%2C%20g%20%3D%20v%2C%20b%20%3D%20p%3B%20break%3B%0A%20%20%20%20%20%20case%202%3A%20r%20%3D%20p%2C%20g%20%3D%20v%2C%20b%20%3D%20t%3B%20break%3B%0A%20%20%20%20%20%20case%203%3A%20r%20%3D%20p%2C%20g%20%3D%20q%2C%20b%20%3D%20v%3B%20break%3B%0A%20%20%20%20%20%20case%204%3A%20r%20%3D%20t%2C%20g%20%3D%20p%2C%20b%20%3D%20v%3B%20break%3B%0A%20%20%20%20%20%20case%205%3A%20r%20%3D%20v%2C%20g%20%3D%20p%2C%20b%20%3D%20q%3B%20break%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%5Br%20*%20255%20%7C%200%2C%20g%20*%20255%20%7C%200%2C%20b%20*%20255%20%7C%200%5D%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BCanvasGradient%7D%20gradient%0A%20%20%20*%20%40param%20%7Bnumber%7D%20offset%20number%20of%20cycles%20to%20offset%20by%0A%20%20%20*%2F%0A%20%20const%20addRainbowStops%20%3D%20(gradient%2C%20offset)%20%3D%3E%20%7B%0A%20%20%20%20const%20NUMBER_STOPS%20%3D%2020%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20NUMBER_STOPS%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20exactPosition%20%3D%20i%20%2F%20NUMBER_STOPS%3B%0A%20%20%20%20%20%20let%20offsetPosition%20%3D%20(exactPosition%20-%20offset)%20%25%201%3B%0A%20%20%20%20%20%20if%20(offsetPosition%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20offsetPosition%20%2B%3D%201%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20rgb%20%3D%20hsvToRGB(offsetPosition%2C%201%2C%201)%3B%0A%20%20%20%20%20%20gradient.addColorStop(exactPosition%2C%20formatColor(rgb))%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20class%20TextCostumeSkin%20extends%20Skin%20%7B%0A%20%20%20%20constructor%20(id%2C%20drawable)%20%7B%0A%20%20%20%20%20%20super(id%2C%20renderer)%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7BRenderWebGL.Drawable%7D%20*%2F%0A%20%20%20%20%20%20this.drawable%20%3D%20drawable%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7Bnumber%7D%20*%2F%0A%20%20%20%20%20%20this._previousDrawableXScale%20%3D%20100%3B%0A%0A%20%20%20%20%20%20this.canvas%20%3D%20document.createElement('canvas')%3B%0A%20%20%20%20%20%20this.canvas.width%20%3D%200%3B%0A%20%20%20%20%20%20this.canvas.height%20%3D%200%3B%0A%20%20%20%20%20%20this.ctx%20%3D%20this.canvas.getContext('2d')%3B%0A%0A%20%20%20%20%20%20this.text%20%3D%20''%3B%0A%20%20%20%20%20%20this.color%20%3D%20DEFAULT_COLOR%3B%0A%20%20%20%20%20%20this.textWidth%20%3D%20DEFAULT_WIDTH%3B%0A%20%20%20%20%20%20this.fontFamily%20%3D%20DEFAULT_FONT%3B%0A%20%20%20%20%20%20this.baseFontSize%20%3D%20DEFAULT_FONT_SIZE%3B%0A%20%20%20%20%20%20this.align%20%3D%20DEFAULT_ALIGN%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7BArray%3C%7Btext%3A%20string%3B%20width%3A%20number%3B%7D%3E%7D%20*%2F%0A%20%20%20%20%20%20this.lines%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7B%5Bnumber%2C%20number%5D%7D%20*%2F%0A%20%20%20%20%20%20this._size%20%3D%20%5B0%2C%200%5D%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7B%5Bnumber%2C%20number%5D%7D%20*%2F%0A%20%20%20%20%20%20this._rotationCenter%20%3D%20%5B0%2C%200%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Updated%20in%20_updateFontDimensions%0A%20%20%20%20%20%20this.calculatedFontSize%20%3D%200%3B%0A%20%20%20%20%20%20this.lineHeight%20%3D%200%3B%0A%20%20%20%20%20%20this.verticalPadding%20%3D%200%3B%0A%20%20%20%20%20%20this.wrapWidth%20%3D%200%3B%0A%0A%20%20%20%20%20%20this._textDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._renderedAtScale%20%3D%201%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%200%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%200%3B%0A%0A%20%20%20%20%20%20this.typeAnimationInterval%20%3D%20null%3B%0A%0A%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20this.rainbowStartTime%20%3D%200%3B%0A%20%20%20%20%20%20this.rainbowTimeout%20%3D%20null%3B%0A%0A%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20this.zoomStartTime%20%3D%200%3B%0A%20%20%20%20%20%20this.zoomTimeout%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7B(()%20%3D%3E%20void)%7Cnull%7D%20*%2F%0A%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20dispose%20()%20%7B%0A%20%20%20%20%20%20if%20(this._texture)%20%7B%0A%20%20%20%20%20%20%20%20gl.deleteTexture(this._texture)%3B%0A%20%20%20%20%20%20%20%20this._texture%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.canvas%20%3D%20null%3B%0A%20%20%20%20%20%20this.ctx%20%3D%20null%3B%0A%20%20%20%20%20%20super.dispose()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20get%20size%20()%20%7B%0A%20%20%20%20%20%20if%20(this._needsReflow())%20%7B%0A%20%20%20%20%20%20%20%20this._reflowText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this._size%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20useNearest%20()%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_needsReflow%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20this._textDirty%20%7C%7C%0A%20%20%20%20%20%20%20%20(this.isZooming%20%26%26%20this._reflowTime%20!%3D%3D%20globalFrameTime)%20%7C%7C%0A%20%20%20%20%20%20%20%20this._previousDrawableXScale%20!%3D%3D%20Math.abs(this.drawable.scale%5B0%5D)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_updateFontDimensions%20()%20%7B%0A%20%20%20%20%20%20this.calculatedFontSize%20%3D%20this.baseFontSize%3B%0A%20%20%20%20%20%20if%20(this.isZooming)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20it%20looks%20like%20Scratch's%20animation%20always%20starts%20at%20least%20a%20little%20visible%0A%20%20%20%20%20%20%20%20const%20time%20%3D%20globalFrameTime%20-%20this.zoomStartTime%3B%0A%20%20%20%20%20%20%20%20const%20progress%20%3D%20Math.max(0%2C%20Math.min(1%2C%20time%20%2F%20ZOOM_DURATION))%3B%0A%20%20%20%20%20%20%20%20this.calculatedFontSize%20*%3D%20progress%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.lineHeight%20%3D%20this.baseFontSize%20*%208%20%2F%207%3B%0A%20%20%20%20%20%20%2F%2F%20Always%20use%20the%20base%20size%20for%20padding.%20This%20makes%20the%20zoom%20animation%20look%20better.%0A%20%20%20%20%20%20this.verticalPadding%20%3D%20this.baseFontSize%20%2F%207%3B%0A%20%20%20%20%20%20%2F%2F%20Only%20use%20horizontal%20scale%20for%20wrap%20width%20for%20compatibility%20with%20stretch%20extension.%0A%20%20%20%20%20%20this.wrapWidth%20%3D%20this.textWidth%20%2F%20(Math.abs(this.drawable.scale%5B0%5D)%20%2F%20100)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getFontStyle%20()%20%7B%0A%20%20%20%20%20%20return%20%60%24%7Bthis.calculatedFontSize%7Dpx%20%22%24%7Bthis.fontFamily%7D%22%2C%20sans-serif%60%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_reflowText%20()%20%7B%0A%20%20%20%20%20%20this._textDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%20globalFrameTime%3B%0A%20%20%20%20%20%20this._previousDrawableXScale%20%3D%20Math.abs(this.drawable.scale%5B0%5D)%3B%0A%0A%20%20%20%20%20%20this._updateFontDimensions()%3B%0A%20%20%20%20%20%20this.ctx.font%20%3D%20this._getFontStyle()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20need%20to%20make%20new%20ones%20each%20time%20to%20avoid%20caching%20incorrectly%20across%20fonts%0A%20%20%20%20%20%20const%20measurementProvider%20%3D%20new%20CanvasMeasurementProvider(this.ctx)%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7BRenderWebGL.TextWrapper%7D%20*%2F%0A%20%20%20%20%20%20const%20textWrapper%20%3D%20renderer.createTextWrapper(measurementProvider)%3B%0A%0A%20%20%20%20%20%20const%20lines%20%3D%20textWrapper.wrapText(this.wrapWidth%2C%20this.text)%3B%0A%20%20%20%20%20%20this.lines%20%3D%20lines.map(line%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20trimmed%20%3D%20line.trimEnd()%3B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20trimmed%2C%0A%20%20%20%20%20%20%20%20%20%20width%3A%20measurementProvider.measureText(trimmed)%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20this._size%5B0%5D%20%3D%20this.wrapWidth%3B%0A%20%20%20%20%20%20this._size%5B1%5D%20%3D%20this.lines.length%20*%20this.lineHeight%20%2B%202%20*%20this.verticalPadding%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Centered%20horizontally%0A%20%20%20%20%20%20this._rotationCenter%5B0%5D%20%3D%20this._size%5B0%5D%20%2F%202%3B%0A%20%20%20%20%20%20%2F%2F%20Vertical%20center%20is%20roughly%20below%20the%20first%20line%20of%20text%0A%20%20%20%20%20%20this._rotationCenter%5B1%5D%20%3D%20this.calculatedFontSize%20*%200.9%20%2B%20this.verticalPadding%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_renderAtScale%20(requestedScale)%20%7B%0A%20%20%20%20%20%20this._renderedAtScale%20%3D%20requestedScale%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%20globalFrameTime%3B%0A%0A%20%20%20%20%20%20const%20scratchWidth%20%3D%20this._size%5B0%5D%3B%0A%20%20%20%20%20%20const%20scratchHeight%20%3D%20this._size%5B1%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Renderer's%20requested%20scale%20is%20accounted%20for%20at%20this%20point.%20Do%20not%20touch%20%60requestedScale%60%0A%20%20%20%20%20%20%2F%2F%20ever%20after%20this%20point.%0A%20%20%20%20%20%20this.canvas.width%20%3D%20Math.ceil(scratchWidth%20*%20requestedScale)%3B%0A%20%20%20%20%20%20this.canvas.height%20%3D%20Math.ceil(scratchHeight%20*%20requestedScale)%3B%0A%20%20%20%20%20%20this.ctx.scale(requestedScale%2C%20requestedScale)%3B%0A%0A%20%20%20%20%20%20const%20rainbowOffset%20%3D%20this.isRainbow%20%3F%20(globalFrameTime%20-%20this.rainbowStartTime)%20%2F%20RAINBOW_TIME_PER%20%3A%200%3B%0A%20%20%20%20%20%20this.ctx.fillStyle%20%3D%20this.color%3B%0A%20%20%20%20%20%20this.ctx.font%20%3D%20this._getFontStyle()%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.lines.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20line%20%3D%20this.lines%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20text%20%3D%20line.text%3B%0A%20%20%20%20%20%20%20%20const%20lineWidth%20%3D%20line.width%3B%0A%0A%20%20%20%20%20%20%20%20let%20xOffset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.align%20%3D%3D%3D%20ALIGN_LEFT)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20already%20correct%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.align%20%3D%3D%3D%20ALIGN_CENTER)%20%7B%0A%20%20%20%20%20%20%20%20%20%20xOffset%20%3D%20(this.wrapWidth%20-%20lineWidth)%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20xOffset%20%3D%20this.wrapWidth%20-%20lineWidth%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(this.isRainbow)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20gradient%20%3D%20this.ctx.createLinearGradient(xOffset%2C%200%2C%20xOffset%20%2B%20lineWidth%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20addRainbowStops(gradient%2C%20rainbowOffset)%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.fillStyle%20%3D%20gradient%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20something%20here%20is%20wrong%0A%20%20%20%20%20%20%20%20this.ctx.fillText(%0A%20%20%20%20%20%20%20%20%20%20text%2C%0A%20%20%20%20%20%20%20%20%20%20xOffset%2C%0A%20%20%20%20%20%20%20%20%20%20this.verticalPadding%20%2B%20i%20*%20this.lineHeight%20%2B%20this.baseFontSize%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!this._texture)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%20-%20twgl%20not%20typed%20yet%0A%20%20%20%20%20%20%20%20this._texture%20%3D%20twgl.createTexture(gl%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20auto%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20wrap%3A%20gl.CLAMP_TO_EDGE%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this._setTexture(this.canvas)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_invalidateTexture%20()%20%7B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%200%3B%0A%20%20%20%20%20%20this.emitWasAltered()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_invalidateText%20()%20%7B%0A%20%20%20%20%20%20this._textDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%200%3B%0A%20%20%20%20%20%20this.emitWasAltered()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setText%20(text)%20%7B%0A%20%20%20%20%20%20if%20(text%20!%3D%3D%20this.text)%20%7B%0A%20%20%20%20%20%20%20%20this.text%20%3D%20text%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setColor%20(color)%20%7B%0A%20%20%20%20%20%20if%20(color%20!%3D%3D%20this.color)%20%7B%0A%20%20%20%20%20%20%20%20this.color%20%3D%20color%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAlign%20(align)%20%7B%0A%20%20%20%20%20%20if%20(align%20!%3D%3D%20this.align)%20%7B%0A%20%20%20%20%20%20%20%20this.align%20%3D%20align%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setWidth%20(width)%20%7B%0A%20%20%20%20%20%20if%20(width%20!%3D%3D%20this.textWidth)%20%7B%0A%20%20%20%20%20%20%20%20this.textWidth%20%3D%20width%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFontFamily%20(font)%20%7B%0A%20%20%20%20%20%20if%20(font%20!%3D%3D%20this.fontFamily)%20%7B%0A%20%20%20%20%20%20%20%20this.fontFamily%20%3D%20font%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getFontFamily%20()%20%7B%0A%20%20%20%20%20%20return%20this.fontFamily%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getColor%20()%20%7B%0A%20%20%20%20%20%20return%20this.color%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getWidth%20()%20%7B%0A%20%20%20%20%20%20return%20this.textWidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_oneAnimationAtATime%20(newCallback)%20%7B%0A%20%20%20%20%20%20this.cancelAnimation()%3B%0A%20%20%20%20%20%20return%20new%20Promise(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20newCallback(this.resolveOngoingAnimation)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startTypeAnimation%20()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20originalText%20%3D%20this.text%3B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%201%3B%0A%20%20%20%20%20%20%20%20const%20update%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.setText(originalText.substring(0%2C%20i))%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20update()%3B%0A%0A%20%20%20%20%20%20%20%20this.typeAnimationInterval%20%3D%20setInterval(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20i%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20update()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(i%20%3E%3D%20originalText.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clearInterval(this.typeAnimationInterval)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%20TYPE_DELAY)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startRainbowAnimation%20()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.rainbowStartTime%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%20%20this.rainbowTimeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20RAINBOW_DURATION)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startZoomAnimation%20()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isZooming%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.zoomStartTime%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20this.zoomTimeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20ZOOM_DURATION)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20cancelAnimation%20()%20%7B%0A%20%20%20%20%20%20if%20(this.resolveOngoingAnimation)%20%7B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation()%3B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20clearInterval(this.typeAnimationInterval)%3B%0A%0A%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearTimeout(this.rainbowTimeout)%3B%0A%0A%20%20%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearTimeout(this.zoomTimeout)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20sometimes%20we%20only%20need%20to%20invalidate%20the%20texture%20at%20this%20point%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20updateSilhouette%20(scale)%20%7B%0A%20%20%20%20%20%20this.getTexture(scale)%3B%0A%20%20%20%20%20%20this._silhouette.unlazy()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20getTexture%20(scale)%20%7B%0A%20%20%20%20%20%20const%20MAX_SCALE%20%3D%2010%3B%0A%20%20%20%20%20%20const%20upperScale%20%3D%20scale%20%3F%20Math.max(Math.abs(scale%5B0%5D)%2C%20Math.abs(scale%5B1%5D))%20%3A%20100%3B%0A%20%20%20%20%20%20const%20calculatedScale%20%3D%20Math.min(MAX_SCALE%2C%20upperScale%20%2F%20100)%3B%0A%0A%20%20%20%20%20%20if%20(this._needsReflow())%20%7B%0A%20%20%20%20%20%20%20%20this._reflowText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20this._textureDirty%20%7C%7C%0A%20%20%20%20%20%20%20%20(this.isRainbow%20%26%26%20this._renderTime%20!%3D%3D%20globalFrameTime)%20%7C%7C%0A%20%20%20%20%20%20%20%20calculatedScale%20!%3D%3D%20this._renderedAtScale%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20this._renderAtScale(calculatedScale)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20this._texture%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20Note%20that%20the%20returned%20skin%20is%20only%20usable%20by%20the%20given%20target.%20Things%20will%20break%20if%20another%0A%20%20%20*%20target%20tries%20to%20use%20it.%0A%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20*%20%40returns%20%7BTextCostumeSkin%7D%0A%20%20%20*%2F%0A%20%20const%20createTextCostumeSkin%20%3D%20(target)%20%3D%3E%20%7B%0A%20%20%20%20const%20drawable%20%3D%20renderer._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20const%20id%20%3D%20renderer._nextSkinId%2B%2B%3B%0A%20%20%20%20const%20skin%20%3D%20new%20TextCostumeSkin(id%2C%20drawable)%3B%0A%20%20%20%20renderer._allSkins%5Bid%5D%20%3D%20skin%3B%0A%20%20%20%20return%20skin%3B%0A%20%20%7D%3B%0A%0A%20%20vm.runtime.on('BEFORE_EXECUTE'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20globalFrameTime%20%3D%20Date.now()%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20renderer._allSkins.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allSkins%5Bi%5D%3B%0A%20%20%20%20%20%20if%20(skin%20instanceof%20TextCostumeSkin%20%26%26%20(skin.isRainbow%20%7C%7C%20skin.isZooming))%20%7B%0A%20%20%20%20%20%20%20%20skin.emitWasAltered()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20class%20AnimatedText%20%7B%0A%20%20%20%20constructor%20()%20%7B%0A%20%20%20%20%20%20vm.runtime.on('PROJECT_START'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._hideAllText()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20vm.runtime.on('PROJECT_STOP_ALL'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._hideAllText()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20targetWasCreated%20does%20not%20work%20because%20it%20runs%20before%20the%20Drawable%20is%20set%20up%0A%20%20%20%20%20%20const%20extension%20%3D%20this%3B%0A%20%20%20%20%20%20const%20originalMakeClone%20%3D%20RenderedTarget.prototype.makeClone%3B%0A%20%20%20%20%20%20RenderedTarget.prototype.makeClone%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20const%20newClone%20%3D%20originalMakeClone.call(this)%3B%0A%20%20%20%20%20%20%20%20if%20(extension._hasState(this))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20creates%20much%20unneeded%20state%0A%20%20%20%20%20%20%20%20%20%20const%20originalSkin%20%3D%20extension._getState(this).skin%3B%0A%20%20%20%20%20%20%20%20%20%20const%20newSkin%20%3D%20extension._getState(newClone).skin%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setAlign(originalSkin.align)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setColor(originalSkin.color)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setFontFamily(originalSkin.fontFamily)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setWidth(originalSkin.textWidth)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setText(originalSkin.text)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(renderer._allDrawables%5Bthis.drawableID%5D.skin%20instanceof%20TextCostumeSkin)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer.updateDrawableSkinId(newClone.drawableID%2C%20newSkin.id)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20newClone%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20vm.runtime.on('targetWasRemoved'%2C%20(target)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._hasState(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20state%20%3D%20this._getState(target)%3B%0A%20%20%20%20%20%20%20%20%20%20renderer.destroySkin(state.skin.id)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20'text'%2C%0A%20%20%20%20%20%20%20%20name%3A%20'Animated%20Text'%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20blockIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setText'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'show%20text%20%5BTEXT%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Welcome%20to%20my%20project!'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'animateText'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BANIMATE%5D%20text%20%5BTEXT%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'animate'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'rainbow'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Here%20we%20go!'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'clearText'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'show%20sprite'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setFont'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20font%20to%20%5BFONT%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FONT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'font'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setColor'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20text%20color%20to%20%5BCOLOR%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setWidth'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'200'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ALIGN%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'align'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'labelNewBlocks'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Incompatible%20with%20Scratch%20Lab%3A'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'textActive'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'is%20showing%20text%3F'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getTextAttribute'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'text%20%5BATTRIBUTE%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ATTRIBUTE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'attribute'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20These%20all%20need%20acceptReporters%3A%20false%20for%20parity%20with%20the%20Scratch%20Labs%20version.%0A%20%20%20%20%20%20%20%20%20%20animate%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'type'%2C%20'rainbow'%2C%20'zoom'%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20font%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20...NATIVE_FONTS%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'random%20font'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'Random'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20align%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'left'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'center'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'right'%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20attribute%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'font'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'color'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'width'%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40returns%20%7BTextState%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_getState%20(target)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20target%5BCUSTOM_STATE_KEY%5D%3B%0A%20%20%20%20%20%20if%20(!state)%20%7B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BTextState%7D%20*%2F%0A%20%20%20%20%20%20%20%20const%20newState%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20skin%3A%20createTextCostumeSkin(target)%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20target%5BCUSTOM_STATE_KEY%5D%20%3D%20newState%3B%0A%20%20%20%20%20%20%20%20return%20newState%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20state%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40returns%20%7Bboolean%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_hasState%20(target)%20%7B%0A%20%20%20%20%20%20return%20!!target%5BCUSTOM_STATE_KEY%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_hideAllText%20()%20%7B%0A%20%20%20%20%20%20for%20(const%20target%20of%20vm.runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._hasState(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._hideText(target%2C%20this._getState(target))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40param%20%7BTextState%7D%20state%0A%20%20%20%20%20*%2F%0A%20%20%20%20_renderText%20(target%2C%20state)%20%7B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%20%20%20%20%20%20renderer.updateDrawableSkinId(target.drawableID%2C%20state.skin.id)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40param%20%7BTextState%7D%20state%0A%20%20%20%20%20*%2F%0A%20%20%20%20_hideText%20(target%2C%20state)%20%7B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%20%20%20%20%20%20target.setCostume(target.currentCostume)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setText%20(%7B%20TEXT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20this._renderText(util.target%2C%20state)%3B%0A%20%20%20%20%20%20state.skin.setText(Scratch.Cast.toString(TEXT))%3B%0A%20%20%20%20%20%20%2F%2F%20Scratch%20forces%201%20frame%20delay%20by%20returning%20promise.%20I%20think%20that's%20silly.%0A%20%20%20%20%20%20util.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20animateText%20(%7B%20ANIMATE%2C%20TEXT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20this._renderText(util.target%2C%20state)%3B%0A%0A%20%20%20%20%20%20state.skin.setText(Scratch.Cast.toString(TEXT))%3B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%0A%20%20%20%20%20%20if%20(ANIMATE%20%3D%3D%3D%20'type')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startTypeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ANIMATE%20%3D%3D%3D%20'rainbow')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startRainbowAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ANIMATE%20%3D%3D%3D%20'zoom')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startZoomAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20does%20nothing%20here%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20clearText%20(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(this._hasState(util.target))%20%7B%0A%20%20%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20%20%20this._hideText(util.target%2C%20state)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20Scratch%20forces%201%20frame%20delay%20by%20returning%20promise.%20I%20think%20that's%20silly.%0A%20%20%20%20%20%20util.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFont%20(%7B%20FONT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20if%20(FONT%20%3D%3D%3D%20'Random')%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Random%20font%20always%20switches%20to%20a%20new%20font%2C%20never%20the%20same%20one%0A%20%20%20%20%20%20%20%20const%20possibleFonts%20%3D%20NATIVE_FONTS.filter(i%20%3D%3E%20i%20!%3D%3D%20state.skin.fontFamily)%3B%0A%20%20%20%20%20%20%20%20state.skin.setFontFamily(possibleFonts%5BMath.floor(Math.random()%20*%20possibleFonts.length)%5D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setFontFamily(Scratch.Cast.toString(FONT))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setColor%20(%7B%20COLOR%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setColor(Scratch.Cast.toString(COLOR))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setWidth%20(%7B%20WIDTH%2C%20ALIGN%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%0A%20%20%20%20%20%20if%20(ALIGN%20%3D%3D%3D%20'center')%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_CENTER)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ALIGN%20%3D%3D%3D%20'right')%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_RIGHT)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20treats%20unknown%20values%20as%20left%20alignment.%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_LEFT)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20state.skin.setWidth(Scratch.Cast.toNumber(WIDTH))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20textActive%20(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20util.target.drawableID%3B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin%3B%0A%20%20%20%20%20%20return%20skin%20instanceof%20TextCostumeSkin%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTextAttribute%20(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20attrib%20%3D%20args.ATTRIBUTE%3B%0A%20%20%20%20%20%20if%20(attrib%20%3D%3D%3D%20'font')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getFontFamily()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20'color')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getColor()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20'width')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getWidth()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20should%20never%20happen%0A%20%20%20%20%20%20%20%20return%20''%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20AnimatedText())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Copy%20of%20S4-0_nosuite.js%20as%20of%2010%2F31%2F2022%0A%2F*%20eslint-disable%20*%2F%0A%0A(function(Scratch)%20%7B%0A%0Avar%20servers%20%3D%20%7B%7D%3B%20%3B%20%2F%2F%20Server%20list%0Alet%20mWS%20%3D%20null%3B%0A%0A%2F%2F%20Get%20the%20server%20URL%20list%0Atry%20%7B%0A%09Scratch.fetch('https%3A%2F%2Fmikedev101.github.io%2Fcloudlink%2Fserverlist.json').then(response%20%3D%3E%20%7B%0A%09%09return%20response.text()%3B%0A%09%7D).then(data%20%3D%3E%20%7B%0A%09%09servers%20%3D%20JSON.parse(data)%3B%0A%09%7D).catch(err%20%3D%3E%20%7B%0A%09%09console.log(err)%3B%0A%09%09servers%20%3D%20%7B%7D%3B%0A%09%7D)%3B%0A%7D%20catch(err)%20%7B%0A%09console.log(err)%3B%0A%09servers%20%3D%20%7B%7D%3B%0A%7D%3B%0A%0Afunction%20find_id(ID%2C%20ulist)%20%7B%0A%09%2F%2F%20Thanks%20StackOverflow!%0A%09if%20(jsonCheck(ID)%20%26%26%20(!intCheck(ID)))%20%7B%0A%09%09return%20ulist.some(o%20%3D%3E%20((o.username%20%3D%3D%3D%20JSON.parse(ID).username)%20%26%26%20(o.id%20%3D%3D%20JSON.parse(ID).id)))%3B%0A%09%7D%20else%20%7B%0A%09%09return%20ulist.some(o%20%3D%3E%20((o.username%20%3D%3D%3D%20String(ID))%20%7C%7C%20(o.id%20%3D%3D%20ID)))%3B%0A%09%7D%3B%0A%7D%0A%0Afunction%20jsonCheck(JSON_STRING)%20%7B%0A%09try%20%7B%0A%09%09JSON.parse(JSON_STRING)%3B%0A%09%09return%20true%3B%0A%09%7D%20catch%20(err)%20%7B%0A%09%09return%20false%3B%0A%09%7D%0A%7D%0A%0Afunction%20intCheck(value)%20%7B%0A%09return%20!isNaN(value)%3B%0A%7D%0A%0Afunction%20autoConvert(value)%20%7B%0A%09%2F%2F%20Check%20if%20the%20value%20is%20JSON%20%2F%20Dict%20first%0A%09try%20%7B%0A%09%09JSON.parse(value)%3B%0A%09%09return%20JSON.parse(value)%3B%0A%09%7D%20catch%20(err)%20%7B%7D%3B%0A%0A%09%2F%2F%20Check%20if%20the%20value%20is%20an%20array%0A%09try%20%7B%0A%09%09tmp%20%3D%20value%3B%0A%09%09tmp%20%3D%20tmp.replace(%2F'%2Fg%2C%20'%22')%3B%0A%09%09JSON.parse(tmp)%3B%0A%09%09return%20JSON.parse(tmp)%3B%0A%09%7D%20catch%20(err)%20%7B%7D%3B%0A%0A%09%2F%2F%20Check%20if%20an%20int%2Ffloat%0A%09if%20(!isNaN(value))%20%7B%0A%09%09return%20Number(value)%3B%0A%09%7D%3B%0A%0A%09%2F%2F%20Leave%20as%20the%20original%20value%20if%20none%20of%20the%20above%20work%0A%09return%20value%3B%0A%7D%0A%0Aclass%20CloudLink%20%7B%0A%09constructor%20(runtime%2C%20extensionId)%20%7B%0A%09%09%2F%2F%20Extension%20stuff%0A%09%09this.runtime%20%3D%20runtime%3B%0A%09%09this.cl_icon%20%3D%20'data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyMjUuMzU0OCIgaGVpZ2h0PSIyMjUuMzU0OCIgdmlld0JveD0iMCwwLDIyNS4zNTQ4LDIyNS4zNTQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTI3LjMyMjYsLTY3LjMyMjYpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0xMjcuMzIyNiwxODBjMCwtNjIuMjMwMDEgNTAuNDQ3MzksLTExMi42Nzc0IDExMi42Nzc0LC0xMTIuNjc3NGM2Mi4yMzAwMSwwIDExMi42Nzc0LDUwLjQ0NzM5IDExMi42Nzc0LDExMi42Nzc0YzAsNjIuMjMwMDEgLTUwLjQ0NzM5LDExMi42Nzc0IC0xMTIuNjc3NCwxMTIuNjc3NGMtNjIuMjMwMDEsMCAtMTEyLjY3NzQsLTUwLjQ0NzM5IC0xMTIuNjc3NCwtMTEyLjY3NzR6IiBmaWxsPSIjMDBjMjhjIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZS13aWR0aD0iMCIvPjxnIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlLXdpZHRoPSIxIj48cGF0aCBkPSJNMjg2LjEyMDM3LDE1MC41NTc5NWMyMy4yNDA4NiwwIDQyLjA3ODksMTguODM5NDYgNDIuMDc4OSw0Mi4wNzg5YzAsMjMuMjM5NDQgLTE4LjgzODAzLDQyLjA3ODkgLTQyLjA3ODksNDIuMDc4OWgtOTIuMjQwNzRjLTIzLjI0MDg2LDAgLTQyLjA3ODksLTE4LjgzOTQ2IC00Mi4wNzg5LC00Mi4wNzg5YzAsLTIzLjIzOTQ0IDE4LjgzODAzLC00Mi4wNzg5IDQyLjA3ODksLTQyLjA3ODloNC4xODg4N2MxLjgxMTUzLC0yMS41NzA1NSAxOS44OTM1NywtMzguNTEyODkgNDEuOTMxNSwtMzguNTEyODljMjIuMDM3OTMsMCA0MC4xMTk5NywxNi45NDIzNCA0MS45MzE1LDM4LjUxMjg5eiIgZmlsbD0iI2ZmZmZmZiIvPjxwYXRoIGQ9Ik0yODkuMDg2NTUsMjEwLjM0MTE0djkuMDQ2NjdoLTI2LjkxNjYzaC05LjA0NjY3di05LjA0NjY3di01NC41MDMzOWg5LjA0NjY3djU0LjUwMzM5eiIgZmlsbD0iIzAwYzI4YyIvPjxwYXRoIGQ9Ik0yMjIuNDA5MjUsMjE5LjM4NzgxYy04LjM1MzIsMCAtMTYuMzY0MzEsLTMuMzE4MzQgLTIyLjI3MDksLTkuMjI0OTJjLTUuOTA2NjEsLTUuOTA2NTggLTkuMjI0OTEsLTEzLjkxNzY4IC05LjIyNDkxLC0yMi4yNzA4OWMwLC04LjM1MzIgMy4zMTgyOSwtMTYuMzY0MzEgOS4yMjQ5MSwtMjIuMjcwOWM1LjkwNjU5LC01LjkwNjYxIDEzLjkxNzcsLTkuMjI0OTEgMjIuMjcwOSwtOS4yMjQ5MWgyMS4xMDg5djguOTM0OThoLTIxLjEwODl2MC4xMDI1N2MtNS45NTYyOCwwIC0xMS42Njg2NCwyLjM2NjE2IC0xNS44ODAzNyw2LjU3Nzg5Yy00LjIxMTczLDQuMjExNzMgLTYuNTc3ODksOS45MjQwOCAtNi41Nzc4OSwxNS44ODAzN2MwLDUuOTU2MjggMi4zNjYxNiwxMS42Njg2NCA2LjU3Nzg5LDE1Ljg4MDM3YzQuMjExNzMsNC4yMTE3MyA5LjkyNDA4LDYuNTc3OTMgMTUuODgwMzcsNi41Nzc5M3YwLjEwMjUzaDIxLjEwODl2OC45MzQ5OHoiIGZpbGw9IiMwMGMyOGMiLz48L2c%2BPC9nPjwvZz48L3N2Zz48IS0tcm90YXRpb25DZW50ZXI6MTEyLjY3NzQwNDA4NDA4MzkyOjExMi42Nzc0MDQwODQwODQwMy0tPg%3D%3D'%3B%0A%09%09this.cl_block%20%3D%20'data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxNzYuMzk4NTQiIGhlaWdodD0iMTIyLjY3MDY5IiB2aWV3Qm94PSIwLDAsMTc2LjM5ODU0LDEyMi42NzA2OSI%2BPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1MS44MDA3MywtMTE4LjY2NDY2KSI%2BPGcgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPGc%2BPHBhdGggZD0iTTI4Ni4xMjAzNywxNTcuMTc3NTVjMjMuMjQwODYsMCA0Mi4wNzg5LDE4LjgzOTQ2IDQyLjA3ODksNDIuMDc4OWMwLDIzLjIzOTQ0IC0xOC44MzgwMyw0Mi4wNzg5IC00Mi4wNzg5LDQyLjA3ODloLTkyLjI0MDc0Yy0yMy4yNDA4NiwwIC00Mi4wNzg5LC0xOC44Mzk0NiAtNDIuMDc4OSwtNDIuMDc4OWMwLC0yMy4yMzk0NCAxOC44MzgwMywtNDIuMDc4OSA0Mi4wNzg5LC00Mi4wNzg5aDQuMTg4ODdjMS44MTE1MywtMjEuNTcwNTUgMTkuODkzNTcsLTM4LjUxMjg5IDQxLjkzMTUsLTM4LjUxMjg5YzIyLjAzNzkzLDAgNDAuMTE5OTcsMTYuOTQyMzQgNDEuOTMxNSwzOC41MTI4OXoiIGZpbGw9IiNmZmZmZmYiLz48cGF0aCBkPSJNMjg5LjA4NjU1LDIxNi45NjA3NHY5LjA0NjY3aC0yNi45MTY2M2gtOS4wNDY2N3YtOS4wNDY2N3YtNTQuNTAzMzloOS4wNDY2N3Y1NC41MDMzOXoiIGZpbGw9IiMwMGMyOGMiLz48cGF0aCBkPSJNMjIyLjQwOTI1LDIyNi4wMDc0MWMtOC4zNTMyLDAgLTE2LjM2NDMxLC0zLjMxODM0IC0yMi4yNzA5LC05LjIyNDkyYy01LjkwNjYxLC01LjkwNjU4IC05LjIyNDkxLC0xMy45MTc2OCAtOS4yMjQ5MSwtMjIuMjcwODljMCwtOC4zNTMyIDMuMzE4MjksLTE2LjM2NDMxIDkuMjI0OTEsLTIyLjI3MDljNS45MDY1OSwtNS45MDY2MSAxMy45MTc3LC05LjIyNDkxIDIyLjI3MDksLTkuMjI0OTFoMjEuMTA4OXY4LjkzNDk4aC0yMS4xMDg5djAuMTAyNTdjLTUuOTU2MjgsMCAtMTEuNjY4NjQsMi4zNjYxNiAtMTUuODgwMzcsNi41Nzc4OWMtNC4yMTE3Myw0LjIxMTczIC02LjU3Nzg5LDkuOTI0MDggLTYuNTc3ODksMTUuODgwMzdjMCw1Ljk1NjI4IDIuMzY2MTYsMTEuNjY4NjQgNi41Nzc4OSwxNS44ODAzN2M0LjIxMTczLDQuMjExNzMgOS45MjQwOCw2LjU3NzkzIDE1Ljg4MDM3LDYuNTc3OTN2MC4xMDI1M2gyMS4xMDg5djguOTM0OTh6IiBmaWxsPSIjMDBjMjhjIi8%2BPC9nPjwvZz48L2c%2BPC9zdmc%2BPCEtLXJvdGF0aW9uQ2VudGVyOjg4LjE5OTI2OTk5OTk5OTk4OjYxLjMzNTM0NDk5OTk5OTk5LS0%2B'%3B%0A%0A%09%09%2F%2F%20Socket%20data%0A%09%09this.socketData%20%3D%20%7B%0A%09%09%09%22gmsg%22%3A%20%5B%5D%2C%0A%09%09%09%22pmsg%22%3A%20%5B%5D%2C%0A%09%09%09%22direct%22%3A%20%5B%5D%2C%0A%09%09%09%22statuscode%22%3A%20%5B%5D%2C%0A%09%09%09%22gvar%22%3A%20%5B%5D%2C%0A%09%09%09%22pvar%22%3A%20%5B%5D%2C%0A%09%09%09%22motd%22%3A%20%22%22%2C%0A%09%09%09%22client_ip%22%3A%20%22%22%2C%0A%09%09%09%22ulist%22%3A%20%5B%5D%2C%0A%09%09%09%22server_version%22%3A%20%22%22%0A%09%09%7D%3B%0A%09%09this.varData%20%3D%20%7B%0A%09%09%09%22gvar%22%3A%20%7B%7D%2C%0A%09%09%09%22pvar%22%3A%20%7B%7D%0A%09%09%7D%3B%0A%0A%09%09this.queueableCmds%20%3D%20%5B%22gmsg%22%2C%20%22pmsg%22%2C%20%22gvar%22%2C%20%22pvar%22%2C%20%22direct%22%2C%20%22statuscode%22%5D%3B%0A%09%09this.varCmds%20%3D%20%5B%22gvar%22%2C%20%22pvar%22%5D%3B%0A%09%0A%09%09%2F%2F%20Listeners%0A%09%09this.socketListeners%20%3D%20%7B%7D%3B%0A%09%09this.socketListenersData%20%3D%20%7B%7D%3B%0A%09%09this.newSocketData%20%3D%20%7B%0A%09%09%09%22gmsg%22%3A%20false%2C%0A%09%09%09%22pmsg%22%3A%20false%2C%0A%09%09%09%22direct%22%3A%20false%2C%0A%09%09%09%22statuscode%22%3A%20false%2C%0A%09%09%09%22gvar%22%3A%20false%2C%0A%09%09%09%22pvar%22%3A%20false%0A%09%09%7D%3B%0A%09%09%0A%09%09%2F%2F%20Edge-triggered%20hat%20blocks%0A%09%09this.connect_hat%20%3D%200%3B%0A%09%09this.packet_hat%20%3D%200%3B%0A%09%09this.close_hat%20%3D%200%3B%0A%09%09%0A%09%09%2F%2F%20Status%20stuff%0A%09%09this.isRunning%20%3D%20false%3B%0A%09%09this.isLinked%20%3D%20false%3B%0A%09%09this.version%20%3D%20%22S4.0%22%3B%0A%09%09this.link_status%20%3D%200%3B%0A%09%09this.username%20%3D%20%22%22%3B%0A%09%09this.tmp_username%20%3D%20%22%22%3B%0A%09%09this.isUsernameSyncing%20%3D%20false%3B%0A%09%09this.isUsernameSet%20%3D%20false%3B%0A%09%09this.disconnectWasClean%20%3D%20false%3B%0A%09%09this.wasConnectionDropped%20%3D%20false%3B%0A%09%09this.didConnectionFail%20%3D%20false%3B%0A%09%09this.protocolOk%20%3D%20false%3B%0A%0A%09%09%2F%2F%20Listeners%20stuff%0A%09%09this.enableListener%20%3D%20false%3B%0A%09%09this.setListener%20%3D%20%22%22%3B%0A%0A%09%09%2F%2F%20Rooms%20stuff%0A%09%09this.enableRoom%20%3D%20false%3B%0A%09%09this.isRoomSetting%20%3D%20false%3B%0A%09%09this.selectRoom%20%3D%20%22%22%3B%0A%09%09%0A%09%09%2F%2F%20Remapping%20stuff%0A%09%09this.menuRemap%20%3D%20%7B%0A%09%09%09%22Global%20data%22%3A%20%22gmsg%22%2C%0A%09%09%09%22Private%20data%22%3A%20%22pmsg%22%2C%0A%09%09%09%22Global%20variables%22%3A%20%22gvar%22%2C%0A%09%09%09%22Private%20variables%22%3A%20%22pvar%22%2C%0A%09%09%09%22Direct%20data%22%3A%20%22direct%22%2C%0A%09%09%09%22Status%20code%22%3A%20%22statuscode%22%2C%0A%09%09%09%22All%20data%22%3A%20%22all%22%0A%09%09%7D%3B%0A%09%7D%0A%0A%09getInfo%20()%20%7B%0A%09%09return%20%7B%0A%09%09%09%22id%22%3A%20'cloudlink'%2C%0A%09%09%09%22name%22%3A%20'CloudLink'%2C%0A%09%09%09%22blockIconURI%22%3A%20this.cl_block%2C%0A%09%09%09%22menuIconURI%22%3A%20this.cl_icon%2C%0A%09%09%09%22blocks%22%3A%20%5B%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'returnGlobalData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Global%20data%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'returnPrivateData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Private%20data%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'returnDirectData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Direct%20Data%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'returnLinkData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Link%20status%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'returnStatusCode'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Status%20code%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'returnUserListData'%2C%20%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Usernames%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20%22returnUsernameData%22%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22My%20username%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20%22returnVersionData%22%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Extension%20version%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20%22returnServerVersion%22%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Server%20version%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20%22returnServerList%22%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Server%20list%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20%22returnMOTD%22%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Server%20MOTD%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20%22returnClientIP%22%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22My%20IP%20address%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'returnListenerData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Response%20for%20listener%20%5BID%5D%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22ID%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20%22example-listener%22%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20%22readQueueSize%22%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Size%20of%20queue%20for%20%5BTYPE%5D%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22TYPE%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22menu%22%3A%20%22allmenu%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20%22All%20data%22%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20%22readQueueData%22%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Packet%20queue%20for%20%5BTYPE%5D%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22TYPE%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22menu%22%3A%20%22allmenu%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20%22All%20data%22%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'returnVarData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22%5BTYPE%5D%20%5BVAR%5D%20data%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22VAR%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20%22Apple%22%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22TYPE%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22menu%22%3A%20%22varmenu%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20%22Global%20variables%22%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'parseJSON'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20'%5BPATH%5D%20of%20%5BJSON_STRING%5D'%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22PATH%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'fruit%2Fapples'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22JSON_STRING%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'%7B%22fruit%22%3A%20%7B%22apples%22%3A%202%2C%20%22bananas%22%3A%203%7D%2C%20%22total_fruit%22%3A%205%7D'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'getFromJSONArray'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Get%20%5BNUM%5D%20from%20JSON%20array%20%5BARRAY%5D'%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22NUM%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22number%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%200%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22ARRAY%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'%5B%22foo%22%2C%22bar%22%5D'%2C%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'fetchURL'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Fetch%20data%20from%20URL%20%5Burl%5D%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22url%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20%22https%3A%2F%2Fmikedev101.github.io%2Fcloudlink%2Ffetch_test%22%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'requestURL'%2C%20%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Send%20request%20with%20method%20%5Bmethod%5D%20for%20URL%20%5Burl%5D%20with%20data%20%5Bdata%5D%20and%20headers%20%5Bheaders%5D'%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22method%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'GET'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22url%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'https%3A%2F%2Fmikedev101.github.io%2Fcloudlink%2Ffetch_test'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22data%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'%7B%7D'%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22headers%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'%7B%7D'%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'makeJSON'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22reporter%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Convert%20%5BtoBeJSONified%5D%20to%20JSON'%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22toBeJSONified%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'%7B%22test%22%3A%20true%7D'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'onConnect'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22hat%22%2C%0A%09%09%09%09%09%22text%22%3A%20'When%20connected'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'onClose'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22hat%22%2C%0A%09%09%09%09%09%22text%22%3A%20'When%20disconnected'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'onListener'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22hat%22%2C%0A%09%09%09%09%09%22text%22%3A%20'When%20I%20receive%20new%20packet%20with%20listener%20%5BID%5D'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22ID%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20%22example-listener%22%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'onNewPacket'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22hat%22%2C%0A%09%09%09%09%09%22text%22%3A%20'When%20I%20receive%20new%20%5BTYPE%5D%20packet'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22TYPE%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22menu%22%3A%20%22almostallmenu%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Global%20data'%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'onNewVar'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22hat%22%2C%0A%09%09%09%09%09%22text%22%3A%20'When%20I%20receive%20new%20%5BTYPE%5D%20data%20for%20%5BVAR%5D'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22TYPE%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22menu%22%3A%20%22varmenu%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Global%20variables'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22VAR%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Apple'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'getComState'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22Boolean%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Connected%3F'%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'getRoomState'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22Boolean%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Linked%20to%20rooms%3F'%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'getComLostConnectionState'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22Boolean%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Lost%20connection%3F'%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'getComFailedConnectionState'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22Boolean%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Failed%20to%20connnect%3F'%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'getUsernameState'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22Boolean%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Username%20synced%3F'%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'returnIsNewData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22Boolean%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Got%20New%20%5BTYPE%5D%3F'%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22TYPE%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22menu%22%3A%20%22datamenu%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Global%20data'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'returnIsNewVarData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22Boolean%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Got%20New%20%5BTYPE%5D%20data%20for%20variable%20%5BVAR%5D%3F'%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22TYPE%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22menu%22%3A%20%22varmenu%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Global%20variables'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22VAR%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Apple'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'returnIsNewListener'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22Boolean%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Got%20new%20packet%20with%20listener%20%5BID%5D%3F'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22ID%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20%22example-listener%22%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'checkForID'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22Boolean%22%2C%0A%09%09%09%09%09%22text%22%3A%20'ID%20%5BID%5D%20connected%3F'%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22ID%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Another%20name'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'isValidJSON'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22Boolean%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Is%20%5BJSON_STRING%5D%20valid%20JSON%3F'%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22JSON_STRING%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'%7B%22fruit%22%3A%20%7B%22apples%22%3A%202%2C%20%22bananas%22%3A%203%7D%2C%20%22total_fruit%22%3A%205%7D'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'openSocket'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Connect%20to%20%5BIP%5D'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22IP%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'ws%3A%2F%2F127.0.0.1%3A3000%2F'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'openSocketPublicServers'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Connect%20to%20server%20%5BID%5D'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22ID%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22number%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20''%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'closeSocket'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Disconnect'%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'setMyName'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Set%20%5BNAME%5D%20as%20username'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22NAME%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20%22A%20name%22%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'createListener'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Attach%20listener%20%5BID%5D%20to%20next%20packet'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22ID%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20%22example-listener%22%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'linkToRooms'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Link%20to%20room(s)%20%5BROOMS%5D'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22ROOMS%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'%5B%22test%22%5D'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'selectRoomsInNextPacket'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Select%20room(s)%20%5BROOMS%5D%20for%20next%20packet'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22ROOMS%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'%5B%22test%22%5D'%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'unlinkFromRooms'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Unlink%20from%20all%20rooms'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'sendGData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Send%20%5BDATA%5D'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22DATA%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Apple'%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'sendPData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Send%20%5BDATA%5D%20to%20%5BID%5D'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22DATA%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Apple'%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22ID%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Another%20name'%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'sendGDataAsVar'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Send%20variable%20%5BVAR%5D%20with%20data%20%5BDATA%5D'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22DATA%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Banana'%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22VAR%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Apple'%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'sendPDataAsVar'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Send%20variable%20%5BVAR%5D%20to%20%5BID%5D%20with%20data%20%5BDATA%5D'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22DATA%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Banana'%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22ID%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Another%20name'%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22VAR%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Apple'%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'runCMDnoID'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Send%20command%20without%20ID%20%5BCMD%5D%20%5BDATA%5D'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22CMD%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'direct'%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22DATA%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'val'%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'runCMD'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Send%20command%20%5BCMD%5D%20%5BID%5D%20%5BDATA%5D'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22CMD%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'direct'%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22ID%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'id'%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22DATA%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'val'%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'resetNewData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Reset%20got%20new%20%5BTYPE%5D%20status'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22TYPE%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22menu%22%3A%20%22datamenu%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Global%20data'%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'resetNewVarData'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Reset%20got%20new%20%5BTYPE%5D%20%5BVAR%5D%20status'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22TYPE%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22menu%22%3A%20%22varmenu%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Global%20variables'%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%22VAR%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'Apple'%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'resetNewListener'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20'Reset%20got%20new%20%5BID%5D%20listener%20status'%2C%0A%09%09%09%09%09%22blockAllThreads%22%3A%20%22true%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22ID%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20'example-listener'%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%7B%0A%09%09%09%09%09%22opcode%22%3A%20'clearAllPackets'%2C%0A%09%09%09%09%09%22blockType%22%3A%20%22command%22%2C%0A%09%09%09%09%09%22text%22%3A%20%22Clear%20all%20packets%20for%20%5BTYPE%5D%22%2C%0A%09%09%09%09%09%22arguments%22%3A%20%7B%0A%09%09%09%09%09%09%22TYPE%22%3A%20%7B%0A%09%09%09%09%09%09%09%22type%22%3A%20%22string%22%2C%0A%09%09%09%09%09%09%09%22menu%22%3A%20%22allmenu%22%2C%0A%09%09%09%09%09%09%09%22defaultValue%22%3A%20%22All%20data%22%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%7D%0A%09%09%09%5D%2C%0A%09%09%09%22menus%22%3A%20%7B%0A%09%09%09%09%22coms%22%3A%20%7B%0A%09%09%09%09%09%22items%22%3A%20%5B%22Connected%22%2C%20%22Username%20synced%22%5D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%22datamenu%22%3A%20%7B%0A%09%09%09%09%09%22items%22%3A%20%5B'Global%20data'%2C%20'Private%20data'%2C%20'Direct%20data'%2C%20'Status%20code'%5D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%22varmenu%22%3A%20%7B%0A%09%09%09%09%09%22items%22%3A%20%5B'Global%20variables'%2C%20'Private%20variables'%5D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%22allmenu%22%3A%20%7B%0A%09%09%09%09%09%22items%22%3A%20%5B'Global%20data'%2C%20'Private%20data'%2C%20'Direct%20data'%2C%20'Status%20code'%2C%20%22Global%20variables%22%2C%20%22Private%20variables%22%2C%20%22All%20data%22%5D%0A%09%09%09%09%7D%2C%0A%09%09%09%09%22almostallmenu%22%3A%20%7B%0A%09%09%09%09%09%22items%22%3A%20%5B'Global%20data'%2C%20'Private%20data'%2C%20'Direct%20data'%2C%20'Status%20code'%2C%20%22Global%20variables%22%2C%20%22Private%20variables%22%5D%0A%09%09%09%09%7D%2C%0A%09%09%09%7D%2C%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09%2F%2F%20Code%20for%20blocks%20go%20here%0A%09%0A%09returnGlobalData()%20%7B%0A%09%09if%20(this.socketData.gmsg.length%20!%3D%200)%20%7B%0A%0A%09%09%09let%20data%20%3D%20(this.socketData.gmsg%5Bthis.socketData.gmsg.length%20-%201%5D.val)%3B%0A%0A%09%09%09if%20(typeof(data)%20%3D%3D%20%22object%22)%20%7B%0A%09%09%09%09data%20%3D%20JSON.stringify(data)%3B%20%2F%2F%20Make%20the%20JSON%20safe%20for%20Scratch%0A%09%09%09%7D%0A%0A%09%09%09return%20data%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20%22%22%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09returnPrivateData()%20%7B%0A%09%09if%20(this.socketData.pmsg.length%20!%3D%200)%20%7B%0A%09%09%09let%20data%20%3D%20(this.socketData.pmsg%5Bthis.socketData.pmsg.length%20-%201%5D.val)%3B%0A%0A%09%09%09if%20(typeof%20(data)%20%3D%3D%20%22object%22)%20%7B%0A%09%09%09%09data%20%3D%20JSON.stringify(data)%3B%20%2F%2F%20Make%20the%20JSON%20safe%20for%20Scratch%0A%09%09%09%7D%0A%0A%09%09%09return%20data%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20%22%22%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09returnDirectData()%20%7B%0A%09%09if%20(this.socketData.direct.length%20!%3D%200)%20%7B%0A%09%09%09let%20data%20%3D%20(this.socketData.direct%5Bthis.socketData.direct.length%20-%201%5D.val)%3B%0A%0A%09%09%09if%20(typeof%20(data)%20%3D%3D%20%22object%22)%20%7B%0A%09%09%09%09data%20%3D%20JSON.stringify(data)%3B%20%2F%2F%20Make%20the%20JSON%20safe%20for%20Scratch%0A%09%09%09%7D%0A%0A%09%09%09return%20data%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20%22%22%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09returnLinkData()%20%7B%0A%09%09return%20String(this.link_status)%3B%0A%09%7D%3B%0A%09%0A%09returnStatusCode()%20%7B%0A%09%09if%20(this.socketData.statuscode.length%20!%3D%200)%20%7B%0A%09%09%09let%20data%20%3D%20(this.socketData.statuscode%5Bthis.socketData.statuscode.length%20-%201%5D.code)%3B%0A%0A%09%09%09if%20(typeof%20(data)%20%3D%3D%20%22object%22)%20%7B%0A%09%09%09%09data%20%3D%20JSON.stringify(data)%3B%20%2F%2F%20Make%20the%20JSON%20safe%20for%20Scratch%0A%09%09%09%7D%0A%0A%09%09%09return%20data%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20%22%22%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09returnUserListData()%20%7B%0A%09%09return%20JSON.stringify(this.socketData.ulist)%3B%0A%09%7D%3B%0A%09%0A%09returnUsernameData()%20%7B%0A%09%09let%20data%20%3D%20this.username%3B%0A%0A%09%09if%20(typeof%20(data)%20%3D%3D%20%22object%22)%20%7B%0A%09%09%09data%20%3D%20JSON.stringify(data)%3B%20%2F%2F%20Make%20the%20JSON%20safe%20for%20Scratch%0A%09%09%7D%0A%0A%09%09return%20data%3B%0A%09%7D%3B%0A%09%0A%09returnVersionData()%20%7B%0A%09%09return%20String(this.version)%3B%0A%09%7D%3B%0A%09%0A%09returnServerVersion()%20%7B%0A%09%09return%20String(this.socketData.server_version)%3B%0A%09%7D%3B%0A%09%0A%09returnServerList()%20%7B%0A%09%09return%20JSON.stringify(servers)%3B%0A%09%7D%3B%0A%09%0A%09returnMOTD()%20%7B%0A%09%09return%20String(this.socketData.motd)%3B%0A%09%7D%3B%0A%09%0A%09returnClientIP()%20%7B%0A%09%09return%20String(this.socketData.client_ip)%3B%0A%09%7D%3B%0A%09%0A%09returnListenerData(%7BID%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20((this.isRunning)%20%26%26%20(this.socketListeners.hasOwnProperty(String(ID))))%20%7B%0A%09%09%09return%20JSON.stringify(this.socketListenersData%5BID%5D)%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20%22%7B%7D%22%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09readQueueSize(%7BTYPE%7D)%20%7B%0A%09%09if%20(this.menuRemap%5BString(TYPE)%5D%20%3D%3D%20%22all%22)%20%7B%0A%09%09%09let%20tmp_size%20%3D%200%3B%0A%09%09%09tmp_size%20%3D%20tmp_size%20%2B%20this.socketData.gmsg.length%3B%0A%09%09%09tmp_size%20%3D%20tmp_size%20%2B%20this.socketData.pmsg.length%3B%0A%09%09%09tmp_size%20%3D%20tmp_size%20%2B%20this.socketData.direct.length%3B%0A%09%09%09tmp_size%20%3D%20tmp_size%20%2B%20this.socketData.statuscode.length%3B%0A%09%09%09tmp_size%20%3D%20tmp_size%20%2B%20this.socketData.gvar.length%3B%0A%09%09%09tmp_size%20%3D%20tmp_size%20%2B%20this.socketData.pvar.length%3B%0A%09%09%09return%20tmp_size%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20this.socketData%5Bthis.menuRemap%5BString(TYPE)%5D%5D.length%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09readQueueData(%7BTYPE%7D)%20%7B%0A%09%09if%20(this.menuRemap%5BString(TYPE)%5D%20%3D%3D%20%22all%22)%20%7B%0A%09%09%09let%20tmp_socketData%20%3D%20JSON.parse(JSON.stringify(this.socketData))%3B%20%2F%2F%20Deep%20copy%0A%09%09%09%0A%09%09%09delete%20tmp_socketData.motd%3B%0A%09%09%09delete%20tmp_socketData.client_ip%3B%0A%09%09%09delete%20tmp_socketData.ulist%3B%0A%09%09%09delete%20tmp_socketData.server_version%3B%0A%09%09%09%0A%09%09%09return%20JSON.stringify(tmp_socketData)%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20JSON.stringify(this.socketData%5Bthis.menuRemap%5BString(TYPE)%5D%5D)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09returnVarData(%7B%20TYPE%2C%20VAR%20%7D)%20%7B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(this.varData.hasOwnProperty(this.menuRemap%5BTYPE%5D))%20%7B%0A%09%09%09%09if%20(this.varData%5Bthis.menuRemap%5BTYPE%5D%5D.hasOwnProperty(VAR))%20%7B%0A%09%09%09%09%09return%20this.varData%5Bthis.menuRemap%5BTYPE%5D%5D%5BVAR%5D.value%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09return%20%22%22%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09return%20%22%22%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20%22%22%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09parseJSON(%7BPATH%2C%20JSON_STRING%7D)%20%7B%0A%09%09try%20%7B%0A%09%09%09const%20path%20%3D%20PATH.toString().split('%2F').map(prop%20%3D%3E%20decodeURIComponent(prop))%3B%0A%09%09%09if%20(path%5B0%5D%20%3D%3D%3D%20'')%20path.splice(0%2C%201)%3B%0A%09%09%09if%20(path%5Bpath.length%20-%201%5D%20%3D%3D%3D%20'')%20path.splice(-1%2C%201)%3B%0A%09%09%09let%20json%3B%0A%09%09%09try%20%7B%0A%09%09%09%09json%20%3D%20JSON.parse('%20'%20%2B%20JSON_STRING)%3B%0A%09%09%09%7D%20catch%20(e)%20%7B%0A%09%09%09%09return%20e.message%3B%0A%09%09%09%7D%3B%0A%09%09%09path.forEach(prop%20%3D%3E%20json%20%3D%20json%5Bprop%5D)%3B%0A%09%09%09if%20(json%20%3D%3D%3D%20null)%20return%20'null'%3B%0A%09%09%09else%20if%20(json%20%3D%3D%3D%20undefined)%20return%20''%3B%0A%09%09%09else%20if%20(typeof%20json%20%3D%3D%3D%20'object')%20return%20JSON.stringify(json)%3B%0A%09%09%09else%20return%20json.toString()%3B%0A%09%09%7D%20catch%20(err)%20%7B%0A%09%09%09return%20''%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09getFromJSONArray(%7BNUM%2C%20ARRAY%7D)%20%7B%0A%09%09var%20json_array%20%3D%20JSON.parse(ARRAY)%3B%0A%09%09if%20(json_array%5BNUM%5D%20%3D%3D%20%22undefined%22)%20%7B%0A%09%09%09return%20%22%22%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09let%20data%20%3D%20json_array%5BNUM%5D%3B%0A%0A%09%09%09if%20(typeof%20(data)%20%3D%3D%20%22object%22)%20%7B%0A%09%09%09%09data%20%3D%20JSON.stringify(data)%3B%20%2F%2F%20Make%20the%20JSON%20safe%20for%20Scratch%0A%09%09%09%7D%0A%0A%09%09%09return%20data%3B%0A%09%09%7D%0A%09%7D%3B%0A%09%0A%09fetchURL(args)%20%7B%0A%09%09return%20Scratch.fetch(args.url%2C%20%7B%0A%09%09%09method%3A%20%22GET%22%0A%09%09%7D).then(response%20%3D%3E%20response.text())%3B%0A%09%7D%3B%0A%09%0A%09requestURL(args)%20%7B%0A%09%09if%20(args.method%20%3D%3D%20%22GET%22%20%7C%7C%20args.method%20%3D%3D%20%22HEAD%22)%20%7B%0A%09%09%09return%20Scratch.fetch(args.url%2C%20%7B%0A%09%09%09%09method%3A%20args.method%2C%0A%09%09%09%09headers%3A%20JSON.parse(args.headers)%0A%09%09%09%7D).then(response%20%3D%3E%20response.text())%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20Scratch.fetch(args.url%2C%20%7B%0A%09%09%09%09method%3A%20args.method%2C%0A%09%09%09%09headers%3A%20JSON.parse(args.headers)%2C%0A%09%09%09%09body%3A%20JSON.parse(args.data)%0A%09%09%09%7D).then(response%20%3D%3E%20response.text())%3B%0A%09%09%7D%20%0A%09%7D%3B%0A%09%0A%09isValidJSON(%7BJSON_STRING%7D)%20%7B%0A%09%09return%20jsonCheck(JSON_STRING)%3B%0A%09%7D%3B%0A%09%0A%09makeJSON(%7BtoBeJSONified%7D)%20%7B%0A%09%09if%20(typeof(toBeJSONified)%20%3D%3D%20%22string%22)%20%7B%0A%09%09%09try%20%7B%0A%09%09%09%09JSON.parse(toBeJSONified)%3B%0A%09%09%09%09return%20String(toBeJSONified)%3B%0A%09%09%09%7D%20catch(err)%20%7B%0A%09%09%09%09return%20%22Not%20JSON!%22%3B%0A%09%09%09%7D%0A%09%09%7D%20else%20if%20(typeof(toBeJSONified)%20%3D%3D%20%22object%22)%20%7B%0A%09%09%09return%20JSON.stringify(toBeJSONified)%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20%22Not%20JSON!%22%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09onConnect()%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(self.connect_hat%20%3D%3D%200%20%26%26%20self.isRunning%20%26%26%20self.protocolOk)%20%7B%0A%09%09%09self.connect_hat%20%3D%201%3B%0A%09%09%09return%20true%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20false%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09onClose()%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(self.close_hat%20%3D%3D%200%20%26%26%20!self.isRunning)%20%7B%0A%09%09%09self.close_hat%20%3D%201%3B%0A%09%09%09return%20true%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20false%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09onListener(%7B%20ID%20%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20((this.isRunning)%20%26%26%20(this.socketListeners.hasOwnProperty(String(ID))))%20%7B%0A%09%09%09if%20(self.socketListeners%5BString(ID)%5D)%20%7B%0A%09%09%09%09self.socketListeners%5BString(ID)%5D%20%3D%20false%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20false%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09onNewPacket(%7B%20TYPE%20%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20((this.isRunning)%20%26%26%20(this.newSocketData%5Bthis.menuRemap%5BString(TYPE)%5D%5D))%20%7B%0A%09%09%09self.newSocketData%5Bthis.menuRemap%5BString(TYPE)%5D%5D%20%3D%20false%3B%0A%09%09%09return%20true%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20false%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09onNewVar(%7B%20TYPE%2C%20VAR%20%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(this.varData.hasOwnProperty(this.menuRemap%5BTYPE%5D))%20%7B%0A%09%09%09%09if%20(this.varData%5Bthis.menuRemap%5BTYPE%5D%5D.hasOwnProperty(VAR))%20%7B%0A%09%09%09%09%09if%20(this.varData%5Bthis.menuRemap%5BTYPE%5D%5D%5BVAR%5D.isNew)%20%7B%0A%09%09%09%09%09%09self.varData%5Bthis.menuRemap%5BTYPE%5D%5D%5BVAR%5D.isNew%20%3D%20false%3B%0A%09%09%09%09%09%09return%20true%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09return%20false%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20false%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09getComState()%7B%0A%09%09return%20String((this.link_status%20%3D%3D%202)%20%7C%7C%20this.protocolOk)%3B%0A%09%7D%3B%0A%0A%09getRoomState()%20%7B%0A%09%09return%20this.isLinked%3B%0A%09%7D%3B%0A%0A%09getComLostConnectionState()%20%7B%0A%09%09return%20this.wasConnectionDropped%3B%0A%09%7D%3B%0A%09%0A%09getComFailedConnectionState()%20%7B%0A%09%09return%20this.didConnectionFail%3B%0A%09%7D%3B%0A%09%0A%09getUsernameState()%7B%0A%09%09return%20this.isUsernameSet%3B%0A%09%7D%3B%0A%09%0A%09returnIsNewData(%7BTYPE%7D)%7B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09return%20this.newSocketData%5Bthis.menuRemap%5BString(TYPE)%5D%5D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20false%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09returnIsNewVarData(%7B%20TYPE%2C%20VAR%20%7D)%20%7B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(this.varData.hasOwnProperty(this.menuRemap%5BTYPE%5D))%20%7B%0A%09%09%09%09if%20(this.varData%5Bthis.menuRemap%5BTYPE%5D%5D.hasOwnProperty(VAR))%20%7B%0A%09%09%09%09%09return%20this.varData%5Bthis.menuRemap%5BTYPE%5D%5D%5BVAR%5D.isNew%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20false%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09returnIsNewListener(%7B%20ID%20%7D)%20%7B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(this.socketListeners.hasOwnProperty(String(ID)))%20%7B%0A%09%09%09%09return%20this.socketListeners%5BID%5D%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20false%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09checkForID(%7B%20ID%20%7D)%20%7B%0A%09%09return%20find_id(ID%2C%20this.socketData.ulist)%3B%0A%09%7D%3B%0A%09%0A%09async%20openSocket(%7BIP%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(!self.isRunning)%20%7B%0A%09%09%09if%20(!await%20Scratch.canFetch(IP))%20%7B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%0A%09%09%09console.log(%22Starting%20socket.%22)%3B%0A%09%09%09self.link_status%20%3D%201%3B%0A%09%09%09%0A%09%09%09self.disconnectWasClean%20%3D%20false%3B%0A%09%09%09self.wasConnectionDropped%20%3D%20false%3B%0A%09%09%09self.didConnectionFail%20%3D%20false%3B%0A%09%09%09%0A%09%09%09mWS%20%3D%20new%20WebSocket(String(IP))%3B%0A%09%09%09%0A%09%09%09mWS.onerror%20%3D%20function()%7B%0A%09%09%09%09self.isRunning%20%3D%20false%3B%0A%09%09%09%7D%3B%0A%09%09%09%0A%09%09%09mWS.onopen%20%3D%20function()%7B%0A%09%09%09%09self.isRunning%20%3D%20true%3B%0A%09%09%09%09self.packet_queue%20%3D%20%7B%7D%3B%0A%09%09%09%09self.link_status%20%3D%202%3B%0A%0A%09%09%09%09%2F%2F%20Send%20the%20handshake%20request%20to%20get%20server%20to%20detect%20client%20protocol%0A%09%09%09%09mWS.send(JSON.stringify(%7B%22cmd%22%3A%20%22handshake%22%2C%20%22listener%22%3A%20%22setprotocol%22%7D))%0A%0A%09%09%09%09console.log(%22Successfully%20opened%20socket.%22)%3B%0A%09%09%09%7D%3B%0A%09%09%09%0A%09%09%09mWS.onmessage%20%3D%20function(event)%7B%0A%09%09%09%09let%20tmp_socketData%20%3D%20JSON.parse(event.data)%3B%0A%09%09%09%09console.log(%22RX%3A%22%2C%20tmp_socketData)%3B%0A%0A%09%09%09%09if%20(self.queueableCmds.includes(tmp_socketData.cmd))%20%7B%0A%09%09%09%09%09self.socketData%5Btmp_socketData.cmd%5D.push(tmp_socketData)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09if%20(tmp_socketData.cmd%20%3D%3D%20%22ulist%22)%20%7B%0A%09%09%09%09%09%09%2F%2F%20ulist%20functionality%20has%20been%20changed%20in%20server%200.1.9%0A%09%09%09%09%09%09if%20(tmp_socketData.hasOwnProperty(%22mode%22))%20%7B%0A%09%09%09%09%09%09%09if%20(tmp_socketData.mode%20%3D%3D%20%22set%22)%20%7B%0A%09%09%09%09%09%09%09%09self.socketData%5B%22ulist%22%5D%20%3D%20tmp_socketData.val%3B%0A%09%09%09%09%09%09%09%7D%20else%20if%20(tmp_socketData.mode%20%3D%3D%20%22add%22)%20%7B%0A%09%09%09%09%09%09%09%09if%20(!self.socketData.ulist.some(o%20%3D%3E%20((o.username%20%3D%3D%3D%20tmp_socketData.val.username)%20%26%26%20(o.id%20%3D%3D%20tmp_socketData.val.id))))%20%7B%0A%09%09%09%09%09%09%09%09%09self.socketData%5B%22ulist%22%5D.push(tmp_socketData.val)%3B%0A%09%09%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09%09%09console.log(%22Could%20not%20perform%20ulist%20method%20add%2C%20client%22%2C%20tmp_socketData.val%2C%20%22already%20exists%22)%3B%0A%09%09%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09%09%7D%20else%20if%20(tmp_socketData.mode%20%3D%3D%20%22remove%22)%20%7B%0A%09%09%09%09%09%09%09%09if%20(self.socketData.ulist.some(o%20%3D%3E%20((o.username%20%3D%3D%3D%20tmp_socketData.val.username)%20%26%26%20(o.id%20%3D%3D%20tmp_socketData.val.id))))%20%7B%0A%09%09%09%09%09%09%09%09%09%2F%2F%20This%20is%20by%20far%20the%20fugliest%20thing%20I%20have%20ever%20written%20in%20JS%2C%20or%20in%20any%20programming%20language...%20thanks%20I%20hate%20it%0A%09%09%09%09%09%09%09%09%09self.socketData%5B%22ulist%22%5D%20%3D%20self.socketData%5B%22ulist%22%5D.filter(user%20%3D%3E%20((!(user.username%20%3D%3D%3D%20tmp_socketData.val.username))%20%26%26%20(!(user.id%20%3D%3D%20tmp_socketData.val.id))))%3B%0A%09%09%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09%09%09console.log(%22Could%20not%20perform%20ulist%20method%20remove%2C%20client%22%2C%20tmp_socketData.val%2C%20%22was%20not%20found%22)%3B%0A%09%09%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09%09console.log(%22Could%20not%20understand%20ulist%20method%3A%22%2C%20tmp_socketData.mode)%3B%0A%09%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09%2F%2F%20Retain%20compatibility%20wtih%20existing%20servers%0A%09%09%09%09%09%09%09self.socketData%5B%22ulist%22%5D%20%3D%20tmp_socketData.val%3B%0A%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09self.socketData%5Btmp_socketData.cmd%5D%20%3D%20tmp_socketData.val%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09%0A%09%09%09%09if%20(self.newSocketData.hasOwnProperty(tmp_socketData.cmd))%20%7B%0A%09%09%09%09%09self.newSocketData%5Btmp_socketData.cmd%5D%20%3D%20true%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09%0A%09%09%09%09if%20(self.varCmds.includes(tmp_socketData.cmd))%20%7B%0A%09%09%09%09%09self.varData%5Btmp_socketData.cmd%5D%5Btmp_socketData.name%5D%20%3D%20%7B%0A%09%09%09%09%09%09%22value%22%3A%20tmp_socketData.val%2C%0A%09%09%09%09%09%09%22isNew%22%3A%20true%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(tmp_socketData.hasOwnProperty(%22listener%22))%20%7B%0A%09%09%09%09%09if%20(tmp_socketData.listener%20%3D%3D%20%22setusername%22)%20%7B%0A%09%09%09%09%09%09self.socketListeners%5B%22setusername%22%5D%20%3D%20true%3B%0A%09%09%09%09%09%09if%20(tmp_socketData.code%20%3D%3D%20%22I%3A100%20%7C%20OK%22)%20%7B%0A%09%09%09%09%09%09%09self.username%20%3D%20tmp_socketData.val%3B%0A%09%09%09%09%09%09%09self.isUsernameSyncing%20%3D%20false%3B%0A%09%09%09%09%09%09%09self.isUsernameSet%20%3D%20true%3B%0A%09%09%09%09%09%09%09console.log(%22Username%20was%20accepted%20by%20the%20server%2C%20and%20has%20been%20set%20to%3A%22%2C%20self.username)%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09console.warn(%22Username%20was%20rejected%20by%20the%20server.%20Error%20code%3A%22%2C%20String(tmp_socketData.code))%3B%0A%09%09%09%09%09%09%09self.isUsernameSyncing%20%3D%20false%3B%0A%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%7D%20else%20if%20(tmp_socketData.listener%20%3D%3D%20%22roomLink%22)%20%7B%0A%09%09%09%09%09%09self.isRoomSetting%20%3D%20false%3B%0A%09%09%09%09%09%09self.socketListeners%5B%22roomLink%22%5D%20%3D%20true%3B%0A%09%09%09%09%09%09if%20(tmp_socketData.code%20%3D%3D%20%22I%3A100%20%7C%20OK%22)%20%7B%0A%09%09%09%09%09%09%09console.log(%22Linking%20to%20room(s)%20was%20accepted%20by%20the%20server!%22)%3B%0A%09%09%09%09%09%09%09self.isLinked%20%3D%20true%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09console.warn(%22Linking%20to%20room(s)%20was%20rejected%20by%20the%20server.%20Error%20code%3A%22%2C%20String(tmp_socketData.code))%3B%0A%09%09%09%09%09%09%09self.enableRoom%20%3D%20false%3B%0A%09%09%09%09%09%09%09self.isLinked%20%3D%20false%3B%0A%09%09%09%09%09%09%09self.selectRoom%20%3D%20%22%22%3B%0A%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%7D%20else%20if%20((tmp_socketData.listener%20%3D%3D%20%22setprotocol%22)%20%26%26%20(!this.protocolOk))%20%7B%0A%09%09%09%09%09%09console.log(%22Server%20successfully%20set%20client%20protocol%20to%20cloudlink!%22)%3B%0A%09%09%09%09%09%09self.socketData.statuscode%20%3D%20%5B%5D%3B%0A%09%09%09%09%09%09self.protocolOk%20%3D%20true%3B%0A%09%09%09%09%09%09self.socketListeners%5B%22setprotocol%22%5D%20%3D%20true%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09if%20(self.socketListeners.hasOwnProperty(tmp_socketData.listener))%20%7B%0A%09%09%09%09%09%09%09self.socketListeners%5Btmp_socketData.listener%5D%20%3D%20true%3B%0A%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09self.socketListenersData%5Btmp_socketData.listener%5D%20%3D%20tmp_socketData%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09self.packet_hat%20%3D%200%3B%0A%09%09%09%7D%3B%0A%09%09%09%0A%09%09%09mWS.onclose%20%3D%20function()%20%7B%0A%09%09%09%09self.isRunning%20%3D%20false%3B%0A%09%09%09%09self.connect_hat%20%3D%200%3B%0A%09%09%09%09self.packet_hat%20%3D%200%3B%0A%09%09%09%09self.protocolOk%20%3D%20false%3B%0A%09%09%09%09if%20(self.close_hat%20%3D%3D%201)%20%7B%0A%09%09%09%09%09self.close_hat%20%3D%200%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09self.socketData%20%3D%20%7B%0A%09%09%09%09%09%22gmsg%22%3A%20%5B%5D%2C%0A%09%09%09%09%09%22pmsg%22%3A%20%5B%5D%2C%0A%09%09%09%09%09%22direct%22%3A%20%5B%5D%2C%0A%09%09%09%09%09%22statuscode%22%3A%20%5B%5D%2C%0A%09%09%09%09%09%22gvar%22%3A%20%5B%5D%2C%0A%09%09%09%09%09%22pvar%22%3A%20%5B%5D%2C%0A%09%09%09%09%09%22motd%22%3A%20%22%22%2C%0A%09%09%09%09%09%22client_ip%22%3A%20%22%22%2C%0A%09%09%09%09%09%22ulist%22%3A%20%5B%5D%2C%0A%09%09%09%09%09%22server_version%22%3A%20%22%22%0A%09%09%09%09%7D%3B%0A%09%09%09%09self.newSocketData%20%3D%20%7B%0A%09%09%09%09%09%22gmsg%22%3A%20false%2C%0A%09%09%09%09%09%22pmsg%22%3A%20false%2C%0A%09%09%09%09%09%22direct%22%3A%20false%2C%0A%09%09%09%09%09%22statuscode%22%3A%20false%2C%0A%09%09%09%09%09%22gvar%22%3A%20false%2C%0A%09%09%09%09%09%22pvar%22%3A%20false%0A%09%09%09%09%7D%3B%0A%09%09%09%09self.socketListeners%20%3D%20%7B%7D%3B%0A%09%09%09%09self.username%20%3D%20%22%22%3B%0A%09%09%09%09self.tmp_username%20%3D%20%22%22%3B%0A%09%09%09%09self.isUsernameSyncing%20%3D%20false%3B%0A%09%09%09%09self.isUsernameSet%20%3D%20false%3B%0A%09%09%09%09self.enableListener%20%3D%20false%3B%0A%09%09%09%09self.setListener%20%3D%20%22%22%3B%0A%09%09%09%09self.enableRoom%20%3D%20false%3B%0A%09%09%09%09self.selectRoom%20%3D%20%22%22%3B%0A%09%09%09%09self.isLinked%20%3D%20false%3B%0A%09%09%09%09self.isRoomSetting%20%3D%20false%3B%0A%0A%09%09%09%09if%20(self.link_status%20!%3D%201)%20%7B%0A%09%09%09%09%09if%20(self.disconnectWasClean)%20%7B%0A%09%09%09%09%09%09self.link_status%20%3D%203%3B%0A%09%09%09%09%09%09console.log(%22Socket%20closed.%22)%3B%0A%09%09%09%09%09%09self.wasConnectionDropped%20%3D%20false%3B%0A%09%09%09%09%09%09self.didConnectionFail%20%3D%20false%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09self.link_status%20%3D%204%3B%0A%09%09%09%09%09%09console.error(%22Lost%20connection%20to%20the%20server.%22)%3B%0A%09%09%09%09%09%09self.wasConnectionDropped%20%3D%20true%3B%0A%09%09%09%09%09%09self.didConnectionFail%20%3D%20false%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09self.link_status%20%3D%204%3B%0A%09%09%09%09%09console.error(%22Failed%20to%20connect%20to%20server.%22)%3B%0A%09%09%09%09%09self.wasConnectionDropped%20%3D%20false%3B%0A%09%09%09%09%09self.didConnectionFail%20%3D%20true%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.warn(%22Socket%20is%20already%20open.%22)%3B%0A%09%09%7D%3B%0A%09%7D%0A%09%0A%09openSocketPublicServers(%7B%20ID%20%7D)%7B%0A%09%09if%20(servers.hasOwnProperty(ID))%20%7B%0A%09%09%09console.log(%22Connecting%20to%3A%22%2C%20servers%5BID%5D.url)%0A%09%09%09this.openSocket(%7B%22IP%22%3A%20servers%5BID%5D.url%7D)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09closeSocket()%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09console.log(%22Closing%20socket...%22)%3B%0A%09%09%09mWS.close(1000%2C'script%20closure')%3B%0A%09%09%09self.disconnectWasClean%20%3D%20true%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.warn(%22Socket%20is%20not%20open.%22)%3B%0A%09%09%7D%3B%0A%09%7D%0A%09%0A%09setMyName(%7BNAME%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(!this.isUsernameSyncing)%20%7B%0A%09%09%09%09if%20(!this.isUsernameSet)%7B%0A%09%09%09%09%09if%20(String(NAME)%20!%3D%20%22%22)%20%7B%0A%09%09%09%09%09%09if%20((!(String(NAME).length%20%3E%2020)))%20%7B%0A%09%09%09%09%09%09%09if%20(!(String(NAME)%20%3D%3D%20%22%25CA%25%22%20%7C%7C%20String(NAME)%20%3D%3D%20%22%25CC%25%22%20%7C%7C%20String(NAME)%20%3D%3D%20%22%25CD%25%22%20%7C%7C%20String(NAME)%20%3D%3D%20%22%25MS%25%22))%7B%0A%09%09%09%09%09%09%09%09let%20tmp_msg%20%3D%20%7B%0A%09%09%09%09%09%09%09%09%09cmd%3A%20%22setid%22%2C%0A%09%09%09%09%09%09%09%09%09val%3A%20String(NAME)%2C%0A%09%09%09%09%09%09%09%09%09listener%3A%20%22setusername%22%0A%09%09%09%09%09%09%09%09%7D%3B%0A%0A%09%09%09%09%09%09%09%09console.log(%22TX%3A%22%2C%20tmp_msg)%3B%0A%09%09%09%09%09%09%09%09mWS.send(JSON.stringify(tmp_msg))%3B%0A%09%09%09%09%09%09%09%09%0A%09%09%09%09%09%09%09%09self.tmp_username%20%3D%20String(NAME)%3B%0A%09%09%09%09%09%09%09%09self.isUsernameSyncing%20%3D%20true%3B%0A%09%09%09%09%09%09%09%09%09%0A%09%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09%09console.log(%22Blocking%20attempt%20to%20use%20reserved%20usernames%22)%3B%0A%09%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09console.log(%22Blocking%20attempt%20to%20use%20username%20larger%20than%2020%20characters%2C%20username%20is%20%22%20%2B%20String(NAME).length%20%2B%20%22%20characters%20long%22)%3B%0A%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09console.log(%22Blocking%20attempt%20to%20use%20blank%20username%22)%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09console.warn(%22Username%20already%20has%20been%20set!%22)%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.warn(%22Username%20is%20still%20syncing!%22)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09createListener(%7B%20ID%20%7D)%20%7B%0A%09%09self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(!this.enableListener)%20%7B%0A%09%09%09%09self.enableListener%20%3D%20true%3B%0A%09%09%09%09self.setListener%20%3D%20String(ID)%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.warn(%22Listeners%20were%20already%20created!%22)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.log(%22Cannot%20assign%20a%20listener%20to%20a%20packet%20while%20disconnected%22)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09linkToRooms(%7B%20ROOMS%20%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(!this.isRoomSetting)%20%7B%0A%09%09%09%09if%20(!(String(ROOMS).length%20%3E%201000))%20%7B%0A%09%09%09%09%09let%20tmp_msg%20%3D%20%7B%0A%09%09%09%09%09%09cmd%3A%20%22link%22%2C%0A%09%09%09%09%09%09val%3A%20autoConvert(ROOMS)%2C%0A%09%09%09%09%09%09listener%3A%20%22roomLink%22%0A%09%09%09%09%09%7D%3B%0A%0A%09%09%09%09%09console.log(%22TX%3A%22%2C%20tmp_msg)%3B%0A%09%09%09%09%09mWS.send(JSON.stringify(tmp_msg))%3B%0A%0A%09%09%09%09%09self.isRoomSetting%20%3D%20true%3B%0A%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09console.warn(%22Blocking%20attempt%20to%20send%20a%20room%20ID%20%2F%20room%20list%20larger%20than%201000%20bytes%20(1%20KB)%2C%20room%20ID%20%2F%20room%20list%20is%20%22%20%2B%20String(ROOMS).length%20%2B%20%22%20bytes%22)%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.warn(%22Still%20linking%20to%20rooms!%22)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.warn(%22Socket%20is%20not%20open.%22)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09selectRoomsInNextPacket(%7BROOMS%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(this.isLinked)%20%7B%0A%09%09%09%09if%20(!this.enableRoom)%20%7B%0A%09%09%09%09%09if%20(!(String(ROOMS).length%20%3E%201000))%20%7B%0A%09%09%09%09%09%09self.enableRoom%20%3D%20true%3B%0A%09%09%09%09%09%09self.selectRoom%20%3D%20ROOMS%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09console.warn(%22Blocking%20attempt%20to%20select%20a%20room%20ID%20%2F%20room%20list%20larger%20than%201000%20bytes%20(1%20KB)%2C%20room%20ID%20%2F%20room%20list%20is%20%22%20%2B%20String(ROOMS).length%20%2B%20%22%20bytes%22)%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09console.warn(%22Rooms%20were%20already%20selected!%22)%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.warn(%22Not%20linked%20to%20any%20room(s)!%22)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.warn(%22Socket%20is%20not%20open.%22)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09unlinkFromRooms()%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(this.isLinked)%20%7B%0A%09%09%09%09let%20tmp_msg%20%3D%20%7B%0A%09%09%09%09%09cmd%3A%20%22unlink%22%2C%0A%09%09%09%09%09val%3A%20%22%22%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22listener%22%5D%20%3D%20autoConvert(this.setListener)%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09console.log(%22TX%3A%22%2C%20tmp_msg)%3B%0A%09%09%09%09mWS.send(JSON.stringify(tmp_msg))%3B%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09if%20(!self.socketListeners.hasOwnProperty(this.setListener))%20%7B%0A%09%09%09%09%09%09self.socketListeners%5Bthis.setListener%5D%20%3D%20false%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09self.enableListener%20%3D%20false%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09self.isLinked%20%3D%20false%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.warn(%22Not%20linked%20to%20any%20rooms!%22)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.warn(%22Socket%20is%20not%20open.%22)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09sendGData(%7BDATA%7D)%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(!(String(DATA).length%20%3E%201000))%20%7B%0A%09%09%09%09let%20tmp_msg%20%3D%20%7B%0A%09%09%09%09%09cmd%3A%20%22gmsg%22%2C%0A%09%09%09%09%09val%3A%20autoConvert(DATA)%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22listener%22%5D%20%3D%20String(this.setListener)%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22rooms%22%5D%20%3D%20autoConvert(this.selectRoom)%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09console.log(%22TX%3A%22%2C%20tmp_msg)%3B%0A%09%09%09%09mWS.send(JSON.stringify(tmp_msg))%3B%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09if%20(!self.socketListeners.hasOwnProperty(this.setListener))%20%7B%0A%09%09%09%09%09%09self.socketListeners%5Bthis.setListener%5D%20%3D%20false%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09self.enableListener%20%3D%20false%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09self.enableRoom%20%3D%20false%3B%0A%09%09%09%09%09self.selectRoom%20%3D%20%22%22%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.warn(%22Blocking%20attempt%20to%20send%20packet%20larger%20than%201000%20bytes%20(1%20KB)%2C%20packet%20is%20%22%20%2B%20String(DATA).length%20%2B%20%22%20bytes%22)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.warn(%22Socket%20is%20not%20open.%22)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09sendPData(%7BDATA%2C%20ID%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(!(String(DATA).length%20%3E%201000))%20%7B%0A%09%09%09%09let%20tmp_msg%20%3D%20%7B%0A%09%09%09%09%09cmd%3A%20%22pmsg%22%2C%0A%09%09%09%09%09val%3A%20autoConvert(DATA)%2C%0A%09%09%09%09%09id%3A%20autoConvert(ID)%0A%09%09%09%09%7D%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22listener%22%5D%20%3D%20String(this.setListener)%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22rooms%22%5D%20%3D%20autoConvert(this.selectRoom)%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09console.log(%22TX%3A%22%2C%20tmp_msg)%3B%0A%09%09%09%09mWS.send(JSON.stringify(tmp_msg))%3B%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09if%20(!self.socketListeners.hasOwnProperty(this.setListener))%20%7B%0A%09%09%09%09%09%09self.socketListeners%5Bthis.setListener%5D%20%3D%20false%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09self.enableListener%20%3D%20false%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09self.enableRoom%20%3D%20false%3B%0A%09%09%09%09%09self.selectRoom%20%3D%20%22%22%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.warn(%22Blocking%20attempt%20to%20send%20packet%20larger%20than%201000%20bytes%20(1%20KB)%2C%20packet%20is%20%22%20%2B%20String(DATA).length%20%2B%20%22%20bytes%22)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.warn(%22Socket%20is%20not%20open.%22)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09sendGDataAsVar(%7BVAR%2C%20DATA%20%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(!(String(DATA).length%20%3E%201000))%20%7B%0A%09%09%09%09let%20tmp_msg%20%3D%20%7B%0A%09%09%09%09%09cmd%3A%20%22gvar%22%2C%0A%09%09%09%09%09name%3A%20VAR%2C%0A%09%09%09%09%09val%3A%20autoConvert(DATA)%0A%09%09%09%09%7D%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22listener%22%5D%20%3D%20String(this.setListener)%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22rooms%22%5D%20%3D%20autoConvert(this.selectRoom)%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09console.log(%22TX%3A%22%2C%20tmp_msg)%3B%0A%09%09%09%09mWS.send(JSON.stringify(tmp_msg))%3B%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09if%20(!self.socketListeners.hasOwnProperty(this.setListener))%20%7B%0A%09%09%09%09%09%09self.socketListeners%5Bthis.setListener%5D%20%3D%20false%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09self.enableListener%20%3D%20false%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09self.enableRoom%20%3D%20false%3B%0A%09%09%09%09%09self.selectRoom%20%3D%20%22%22%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.warn(%22Blocking%20attempt%20to%20send%20packet%20larger%20than%201000%20bytes%20(1%20KB)%2C%20packet%20is%20%22%20%2B%20String(DATA).length%20%2B%20%22%20bytes%22)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.warn(%22Socket%20is%20not%20open.%22)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09sendPDataAsVar(%7BVAR%2C%20ID%2C%20DATA%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(!(String(DATA).length%20%3E%201000))%20%7B%0A%09%09%09%09let%20tmp_msg%20%3D%20%7B%0A%09%09%09%09%09cmd%3A%20%22pvar%22%2C%0A%09%09%09%09%09name%3A%20VAR%2C%0A%09%09%09%09%09val%3A%20autoConvert(DATA)%2C%0A%09%09%09%09%09id%3A%20autoConvert(ID)%0A%09%09%09%09%7D%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22listener%22%5D%20%3D%20String(this.setListener)%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22rooms%22%5D%20%3D%20autoConvert(this.selectRoom)%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09console.log(%22TX%3A%22%2C%20tmp_msg)%3B%0A%09%09%09%09mWS.send(JSON.stringify(tmp_msg))%3B%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09if%20(!self.socketListeners.hasOwnProperty(this.setListener))%20%7B%0A%09%09%09%09%09%09self.socketListeners%5Bthis.setListener%5D%20%3D%20false%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09self.enableListener%20%3D%20false%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09self.enableRoom%20%3D%20false%3B%0A%09%09%09%09%09self.selectRoom%20%3D%20%22%22%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.warn(%22Blocking%20attempt%20to%20send%20packet%20larger%20than%201000%20bytes%20(1%20KB)%2C%20packet%20is%20%22%20%2B%20String(DATA).length%20%2B%20%22%20bytes%22)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.warn(%22Socket%20is%20not%20open.%22)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09runCMDnoID(%7BCMD%2C%20DATA%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(!(String(CMD).length%20%3E%20100)%20%7C%7C%20!(String(DATA).length%20%3E%201000))%20%7B%0A%09%09%09%09let%20tmp_msg%20%3D%20%7B%0A%09%09%09%09%09cmd%3A%20String(CMD)%2C%0A%09%09%09%09%09val%3A%20autoConvert(DATA)%0A%09%09%09%09%7D%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22listener%22%5D%20%3D%20String(this.setListener)%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22rooms%22%5D%20%3D%20String(this.selectRoom)%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09console.log(%22TX%3A%22%2C%20tmp_msg)%3B%0A%09%09%09%09mWS.send(JSON.stringify(tmp_msg))%3B%0A%09%09%09%09%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09if%20(!self.socketListeners.hasOwnProperty(this.setListener))%20%7B%0A%09%09%09%09%09%09self.socketListeners%5Bthis.setListener%5D%20%3D%20false%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09self.enableListener%20%3D%20false%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09self.enableRoom%20%3D%20false%3B%0A%09%09%09%09%09self.selectRoom%20%3D%20%22%22%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.warn(%22Blocking%20attempt%20to%20send%20packet%20with%20questionably%20long%20arguments%22)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.warn(%22Socket%20is%20not%20open.%22)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09runCMD(%7BCMD%2C%20ID%2C%20DATA%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(!(String(CMD).length%20%3E%20100)%20%7C%7C%20!(String(ID).length%20%3E%2020)%20%7C%7C%20!(String(DATA).length%20%3E%201000))%20%7B%0A%09%09%09%09let%20tmp_msg%20%3D%20%7B%0A%09%09%09%09%09cmd%3A%20String(CMD)%2C%0A%09%09%09%09%09id%3A%20autoConvert(ID)%2C%0A%09%09%09%09%09val%3A%20autoConvert(DATA)%0A%09%09%09%09%7D%0A%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22listener%22%5D%20%3D%20String(this.setListener)%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09tmp_msg%5B%22rooms%22%5D%20%3D%20String(this.selectRoom)%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09console.log(%22TX%3A%22%2C%20tmp_msg)%3B%0A%09%09%09%09mWS.send(JSON.stringify(tmp_msg))%3B%0A%09%09%09%09%0A%09%09%09%09if%20(this.enableListener)%20%7B%0A%09%09%09%09%09if%20(!self.socketListeners.hasOwnProperty(this.setListener))%20%7B%0A%09%09%09%09%09%09self.socketListeners%5Bthis.setListener%5D%20%3D%20false%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09self.enableListener%20%3D%20false%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20(this.enableRoom)%20%7B%0A%09%09%09%09%09self.enableRoom%20%3D%20false%3B%0A%09%09%09%09%09self.selectRoom%20%3D%20%22%22%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.warn(%22Blocking%20attempt%20to%20send%20packet%20with%20questionably%20long%20arguments%22)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09console.warn(%22Socket%20is%20not%20open.%22)%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09resetNewData(%7BTYPE%7D)%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09self.newSocketData%5Bthis.menuRemap%5BString(TYPE)%5D%5D%20%3D%20false%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%09%0A%09resetNewVarData(%7B%20TYPE%2C%20VAR%20%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(this.varData.hasOwnProperty(this.menuRemap%5BTYPE%5D))%20%7B%0A%09%09%09%09if%20(this.varData%5Bthis.menuRemap%5BTYPE%5D%5D.hasOwnProperty(VAR))%20%7B%0A%09%09%09%09%09self.varData%5Bthis.menuRemap%5BTYPE%5D%5D%5BVAR%5D.isNew%20%3D%20false%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%7D%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09resetNewListener(%7B%20ID%20%7D)%20%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.isRunning)%20%7B%0A%09%09%09if%20(this.socketListeners.hasOwnProperty(String(ID)))%20%7B%0A%09%09%09%09self.socketListeners%5BString(ID)%5D%20%3D%20false%3B%0A%09%09%09%7D%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%0A%09clearAllPackets(%7BTYPE%7D)%7B%0A%09%09const%20self%20%3D%20this%3B%0A%09%09if%20(this.menuRemap%5BString(TYPE)%5D%20%3D%3D%20%22all%22)%20%7B%0A%09%09%09self.socketData.gmsg%20%3D%20%5B%5D%3B%0A%09%09%09self.socketData.pmsg%20%3D%20%5B%5D%3B%0A%09%09%09self.socketData.direct%20%3D%20%5B%5D%3B%0A%09%09%09self.socketData.statuscode%20%3D%20%5B%5D%3B%0A%09%09%09self.socketData.gvar%20%3D%20%5B%5D%3B%0A%09%09%09self.socketData.pvar%20%3D%20%5B%5D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09self.socketData%5Bthis.menuRemap%5BString(TYPE)%5D%5D%20%3D%20%5B%5D%3B%0A%09%09%7D%3B%0A%09%7D%3B%0A%7D%3B%0A%0Aconsole.log(%22CloudLink%204.0%20loaded.%20Detecting%20unsandboxed%20mode.%22)%3B%0AScratch.extensions.register(new%20CloudLink(Scratch.vm.runtime))%3B%0A%0A%7D)(Scratch)%3B%0A%0A%20%7D)(Scratch)%3B"]) {
        vm.extensionManager.loadExtensionURL(extension);
      }

    } catch (e) {
      handleError(e);
    }
  </script>
  
  
    <script>
      const getProjectData = (function() {
        const storage = scaffolding.storage;
        storage.onprogress = (total, loaded) => {
          setProgress(interpolate(0.2, 0.98, loaded / total));
        };
        
        storage.addWebStore(
          [storage.AssetType.ImageVector, storage.AssetType.ImageBitmap, storage.AssetType.Sound],
          (asset) => new URL('./assets/' + asset.assetId + '.' + asset.dataFormat, location).href
        );
        return () => new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        xhr.onload = () => {
          resolve(xhr.response);
        };
        xhr.onerror = () => {
          if (location.protocol === 'file:') {
            reject(new Error('Zip environment must be used from a website, not from a file URL.'));
          } else {
            reject(new Error('Request to load project data failed.'));
          }
        };
        xhr.onprogress = (e) => {
          if (e.lengthComputable) {
            setProgress(interpolate(0.1, 0.2, e.loaded / e.total));
          }
        };
        xhr.responseType = 'arraybuffer';
        xhr.open('GET', "./assets/project.json");
        xhr.send();
      });
      })();
    </script>
  <script>
    const run = async () => {
      const projectData = await getProjectData();
      await scaffolding.loadProject(projectData);
      setProgress(1);
      loadingScreen.hidden = true;
      if (false) {
        scaffolding.start();
      } else {
        launchScreen.hidden = false;
        launchScreen.addEventListener('click', () => {
          launchScreen.hidden = true;
          scaffolding.start();
        });
        launchScreen.focus();
      }
    };
    run().catch(handleError);
  </script>
</body>
</html>
